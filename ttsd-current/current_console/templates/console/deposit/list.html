{% extends "console/tpl/_layout.tpl" %}
{% load paginator_tag %}

{% block script_content %}
    <script src="/static/js/deposit-list.js"></script>
{% endblock %}

{% block content %}
    <form action="{% url 'deposit_list' %}" class="form-horizontal col-sm-10">
        <table class="table">
            <thead>
            <tr>
                <th colspan="3" class="h3">买入记录管理</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="current_account__mobile">手机号:</label>
                        <div class="col-sm-8">
                            <input id="current_account__mobile" class="form-control" name="current_account__mobile"
                                   maxlength="11"
                                   value="{{ request.GET.current_account__mobile|default_if_none:'' }}">
                        </div>
                    </div>
                </td>
                <td class="col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="status">买入状态:</label>
                        <div class="col-sm-8">
                            <select id="status" class="form-control" name="status">
                                <option value="">请选择</option>
                                {% for key, value in status_choice.items %}
                                    <option value="{{ key }}"
                                            {% ifequal request.GET.status key %}selected{% endifequal %}>
                                        {{ value }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </td>
                <td class="col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="source">来源:</label>
                        <div class="col-sm-8">
                            <select id="status" class="form-control" name="source">
                                <option value="">请选择</option>
                                {% for key, value in source_choice.items %}
                                    <option value="{{ key }}"
                                            {% ifequal request.GET.source key %}selected{% endifequal %}>
                                        {{ value }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2" class="col-sm-8">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">买入时间:</label>
                        <div class="col-sm-3">
                            <input id="updated_time_0" maxlength="20"
                                   class="form-control form-control-datetimepicker"
                                   name="updated_time_0"
                                   value="{{ request.GET.updated_time_0|default_if_none:'' }}">
                        </div>
                        <div class="col-sm-3">
                            <input id="updated_time_1" maxlength="20"
                                   class="form-control form-control-datetimepicker"
                                   name="updated_time_1"
                                   value="{{ request.GET.updated_time_1|default_if_none:'' }}">
                        </div>
                    </div>
                </td>
                <td class="col-sm-4">
                    <button class="btn btn-default pull-right apply">查询</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>

    <table class="table">
        <thead>
        <tr>
            <th>投资人</th>
            <th>投资人姓名</th>
            <th>投资人手机号</th>
            <th>来源</th>
            <th>买入金额（元）</th>
            <th>买入时间</th>
            <th>交易状态</th>
        </tr>
        </thead>
        <tbody>
        {% if data %}
            {% for item in data.results %}
                <tr>
                    <td>{{ item.login_name }}</td>
                    <td>{{ item.current_account.username }}</td>
                    <td>{{ item.current_account.mobile }}</td>
                    <td>{{ source_choice|get_dict_value:item.source }}</td>
                    <td>{{ item.amount|convert_cent_to_yuan }}</td>
                    <td>{{ item.updated_time }}</td>
                    <td>{{ status_choice|get_dict_value:item.status }}</td>
                </tr>
            {% endfor %}
        {% endif %}
        </tbody>
    </table>

    {% paginator_widget request data %}

{% endblock %}