apply plugin: 'war'

version = '1.0'

dependencies {
    compile project(':ttsd-web-common-config'),
            project(':ttsd-service'),
            project(':ttsd-cms-service'),
            project(':ttsd-point-service'),
            project(':ttsd-message-service'),
            project(':ttsd-activity-service'),
            project(':ttsd-util'),
            project(':ttsd-edxactivity-repository'),
            'commons-httpclient:commons-httpclient:3.1',
            fileTree(dir: 'libs', include: '**/*.jar')
    compile 'io.springfox:springfox-swagger2:2.5.0'
    compile 'io.springfox:springfox-swagger-ui:2.5.0'

    providedCompile 'javax.servlet:javax.servlet-api:3.1.0',
            'javax.servlet.jsp:javax.servlet.jsp-api:2.3.1'

    testCompile project(path: ':ttsd-user-repository', configuration: 'tests')
}

war {
    archiveName "ttsd-mobile-api.war"
    destinationDir = file("war")
}

task renameWar {
    doLast {
        file("${project.projectDir.getPath()}/war/ttsd-mobile-api.war").renameTo(file("${project.projectDir.getPath()}/war/ROOT.war"))
    }
}
