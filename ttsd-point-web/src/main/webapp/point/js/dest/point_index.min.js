require(["jquery","layerWrapper","template","jquery.ajax.extension"],function(a,b,c){a(function(){var d=a("#signBtn"),e=a("#signLayer"),f=a("#closeSign"),g=a(".material-list li"),h=a(".point-rule-tip");d.on("click",function(d){d.preventDefault();var f=a(this),g=a(".sign-text"),h=a(".tomorrow-text"),i=a(".add-dou"),j=a("#signBtn");a.ajax({url:f.attr("data-url"),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(d){d.data.status?(g.html("签到成功，领取"+d.data.signInPoint+"积分！"),h.html("明日可领"+d.data.nextSignInPoint+"积分"),j.addClass("no-click").html("已签到"),i.html("+"+d.data.signInPoint),e.fadeIn("fast",function(){a(this).find(".add-dou").animate({bottom:"50px",opacity:"0"},800)})):(a("#errorTip").html(c("errorTipTpl",d.data)),b.open({type:1,title:!1,area:["300px","180px"],content:a("#errorTip")}))})}),f.on("click",function(a){a.preventDefault(),location.href="/point-shop"}),g.on("click",function(b){b.preventDefault(),location.href=a(this).attr("data-href")}).on("click",".get-btn",function(b){b.preventDefault(),!!a(this).hasClass("active")&&(location.href=a(this).parent("a").attr("href")),b.stopPropagation()}),h.on("click",function(c){c.preventDefault(),b.open({type:1,title:!1,closeBtn:0,area:["auto","auto"],content:a("#ruleInfoTip")})}),a("#ruleInfoTip").on("click",".close-btn",function(a){a.preventDefault(),b.closeAll()})})});