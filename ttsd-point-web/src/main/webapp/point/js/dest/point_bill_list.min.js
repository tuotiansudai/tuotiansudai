require(["jquery","mustache","text!/tpl/point-bill-table.mustache","moment","pagination","layerWrapper","daterangepicker"],function(a,b,c,d,e,f){var g=d().format("YYYY-MM-DD"),h=d().subtract(1,"week").format("YYYY-MM-DD"),i=d().subtract(1,"month").format("YYYY-MM-DD"),j=d().subtract(6,"month").format("YYYY-MM-DD"),k=a(".date-filter"),l=a(".status-filter"),m=a("#date-picker"),n=a(".pagination");m.dateRangePicker({separator:" ~ "});var o=function(){var b=a(".date-filter .select-item.current").data("day");switch(b){case 1:m.val(g+"~"+g);break;case 7:m.val(h+"~"+g);break;case 30:m.val(i+"~"+g);break;case 180:m.val(j+"~"+g);break;default:m.val("")}},p=function(d){var e=m.val().split("~"),f=a.trim(e[0])||"",g=a.trim(e[1])||"",h=a(".status-filter .select-item.current").data("status"),i={startTime:f,endTime:g,businessType:h,index:d||1};n.loadPagination(i,function(d){d.status&&_.each(d.records,function(a){switch(a.businessType){case"SIGN_IN":a.businessType="签到奖励";break;case"TASK":a.businessType="任务奖励";break;case"INVEST":a.businessType="任务奖励";break;case"EXCHANGE":a.businessType="财豆兑换"}});var e=b.render(c,d);a(".point-bill-list").html(e)})};o(),p(),k.find(".select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),o(),p()}),l.find(".select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),p()}),a(".apply-btn").click(function(){p(),a(".date-filter .select-item").removeClass("current")})});