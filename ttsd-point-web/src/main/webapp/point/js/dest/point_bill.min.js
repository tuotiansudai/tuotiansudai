require(["jquery","template","moment","pagination","daterangepicker","jquery.ajax.extension"],function(a,b,c){a(function(){var d=a("#dataList"),e=c().format("YYYY-MM-DD"),f=c().subtract(1,"week").format("YYYY-MM-DD"),g=c().subtract(1,"month").format("YYYY-MM-DD"),h=c().subtract(6,"month").format("YYYY-MM-DD"),i=a(".date-filter"),j=a(".status-filter"),k=a("#date-picker");k.dateRangePicker({separator:" ~ "});var l=function(){var b=a(".date-filter .select-item.current").data("day");switch(b){case 1:k.val(e+"~"+e);break;case 7:k.val(f+"~"+e);break;case 30:k.val(g+"~"+e);break;case 180:k.val(h+"~"+e);break;default:k.val("")}},m=function(c){var e=k.val().split("~"),f=a.trim(e[0])||"",g=a.trim(e[1])||"",h=a(".status-filter .select-item.current").attr("data-status"),i={startTime:f,endTime:g,pointType:h,index:c||1};a("#pageList").loadPagination(i,function(c){c.records&&a.each(c.records,function(a,b){switch(b.businessType){case"SIGN_IN":b.businessType="签到奖励";break;case"TASK":b.businessType="任务奖励";break;case"INVEST":b.businessType="投资奖励";break;case"EXCHANGE":b.businessType="积分兑换";break;case"LOTTERY":b.businessType="抽奖";break;case"ACTIVITY":b.businessType="活动奖励";break;case"POINT_CLEAR":b.businessType="积分到期清零";break;case"POINT_LOTTERY":b.businessType="积分抽奖"}}),d.html(b("dataListTpl",c))})};l(),m(),i.find(".select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),l(),m()}),j.find(".select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),m()}),a(".apply-btn").click(function(){m(),a(".date-filter .select-item").removeClass("current")})})});