require(["jquery","layerWrapper","jquery.ajax.extension"],function(a,b){a(function(){var c=a(".count-list"),d=c.find(".num-text"),e=c.find(".total-num i"),f=a("#getBtn");c.on("click",".low-btn",function(a){a.preventDefault(),e.text()>0&&(d.val()>1?d.val(function(a,b){return parseInt(b)-1}):d.val("1"))}).on("click",".add-btn",function(a){a.preventDefault(),e.text()>0&&(d.val()<parseInt(e.text())?d.val(function(a,b){return parseInt(b)+1}):d.val(e.text()))}),f.on("click",function(c){c.preventDefault();var e=a(this),f=e.attr("data-id"),g=e.attr("data-type");a.ajax({url:"/point-shop/hasEnoughGoods",type:"POST",dataType:"json",data:{id:f,itemType:g,amount:d.val()}}).done(function(a){console.log(a),a.data.status?location.href="/point-shop/order/"+f+"/"+g+"/"+d.val():b.msg(a.data.message)}).fail(function(a){b.msg("请求失败，请重试！")})})})});