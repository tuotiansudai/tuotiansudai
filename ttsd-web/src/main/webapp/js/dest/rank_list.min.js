require(["jquery","rotate","layerWrapper","template","jquery.validate","jquery.validate.extension","jquery.ajax.extension"],function($,rotate,layer,tpl){function rotateFnTd(a,b,c){bRotateTd=!bRotateTd,$("#rotateTd").stopRotate(),$("#rotateTd").rotate({angle:0,animateTo:b+1800,duration:8e3,callback:function(){switch($("#tipList").show(),PcDataGet(),a){case 0:$("#twentyRMB").show();break;case 1:$("#iphone6s").show();break;case 2:$("#jdCard").show();break;case 3:$("#jiaxi").show();break;case 4:$("#macbookAir").show()}bRotateTd=!bRotateTd,$(".my-td-bean").each(function(a,b){$(this).text(Math.round($(this).text().replace(/,/gi,""))-1e3)})}})}function rotateFnCd(a,b,c){bRotateCd=!bRotateCd,$("#rotateCd").stopRotate(),$("#rotateCd").rotate({angle:0,animateTo:b+1800,duration:8e3,callback:function(){switch($("#tipList").show(),PcDataGet(),a){case 1:$("#cdFive").show();break;case 3:$("#thankYou").show();break;case 4:$("#cdTwo").show();break;case 5:$("#percentCoupon").show();break;case 7:$("#freeMoney").show()}bRotateCd=!bRotateCd,$(".my-cd-bean").each(function(a,b){$(this).text(Math.round($(this).text().replace(/,/gi,""))-1e3)})}})}function scrollNews(a){var b=a.find("ul.user-record"),c=b.find("li:first").height();b.find("li").length>15&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function scrollGift(a){var b=a.find("ul"),c=b.find("li:first").height();b.find("li").length>5&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function rotateFnTdPhone(a,b,c){bRotateTdPhone=!bRotateTdPhone,$("#rotateTdPhone").stopRotate(),$("#rotateTdPhone").rotate({angle:0,animateTo:b+1800,duration:8e3,callback:function(){switch($("#tipListPhone").show(),PcDataGetPhone(),a){case 0:$("#twentyRMBPhone").show();break;case 1:$("#iphone6sPhone").show();break;case 2:$("#jdCardPhone").show();break;case 3:$("#jiaxiPhone").show();break;case 4:$("#macbookAirPhone").show()}bRotateTdPhone=!bRotateTdPhone,$(".myphone-td-bean").each(function(a,b){$(this).text(Math.round($(this).text().replace(/,/gi,""))-1e3)})}})}function rotateFnCdPhone(a,b,c){bRotateCdPhone=!bRotateCdPhone,$("#rotateCdPhone").stopRotate(),$("#rotateCdPhone").rotate({angle:0,animateTo:b+1800,duration:8e3,callback:function(){switch($("#tipListPhone").show(),PcDataGetPhone(),a){case 1:$("#cdFivePhone").show();break;case 3:$("#thankYouPhone").show();break;case 4:$("#cdTwoPhone").show();break;case 5:$("#percentCouponPhone").show();break;case 7:$("#freeMoneyPhone").show()}bRotateCdPhone=!bRotateCdPhone,$(".myphone-cd-bean").each(function(a,b){$(this).text(Math.round($(this).text().replace(/,/gi,""))-1e3)})}})}function rankList(){$.ajax({url:"/activity/getTianDouTop15",type:"POST",dataType:"json"}).done(function(a){var b={rank:a};$("#rankList").html(tpl("rankListTpl",b))})}function TdGiftRecord(){$.ajax({url:"/activity/getTianDouPrizeList",type:"POST",dataType:"json"}).done(function(a){$("#TdGiftRecord").html(tpl("TdGiftRecordTpl",a))})}function TdMyGift(){$.ajax({url:"/activity/getMyTianDouPrize",type:"POST",dataType:"json"}).done(function(a){var b={tdmygift:a};$("#TdMyGift").html(tpl("TdMyGiftTpl",b))})}function CdGiftRecord(){$.ajax({url:"/activity/getPointPrizeList",type:"POST",dataType:"json"}).done(function(a){var b={cdgiftrecord:a};$("#CdGiftRecord").html(tpl("CdGiftRecordTpl",b))})}function CdMyGift(){$.ajax({url:"/activity/getMyPointPrize",type:"POST",dataType:"json"}).done(function(a){var b={cdmygift:a};$("#CdMyGift").html(tpl("CdMyGiftTpl",b))})}function PcDataGet(){rankList(),TdGiftRecord(),TdMyGift(),CdGiftRecord(),CdMyGift()}function rankListPhone(){$.ajax({url:"/activity/getTianDouTop15",type:"POST",dataType:"json"}).done(function(a){var b={rank:a};$("#rankListPhone").html(tpl("rankListPhoneTpl",b))})}function TdGiftRecordPhone(){$.ajax({url:"/activity/getTianDouPrizeList",type:"POST",dataType:"json"}).done(function(a){$("#TdGiftRecordPhone").html(tpl("TdGiftRecordPhoneTpl",a))})}function TdMyGiftPhone(){$.ajax({url:"/activity/getMyTianDouPrize",type:"POST",dataType:"json"}).done(function(a){var b={tdmygift:a};$("#TdMyGiftPhone").html(tpl("TdMyGiftPhoneTpl",b))})}function CdGiftRecordPhone(){$.ajax({url:"/activity/getPointPrizeList",type:"POST",dataType:"json"}).done(function(a){var b={cdgiftrecord:a};$("#CdGiftRecordPhone").html(tpl("CdGiftRecordPhoneTpl",b))})}function CdMyGiftPhone(){$.ajax({url:"/activity/getMyPointPrize",type:"POST",dataType:"json"}).done(function(a){var b={cdmygift:a};$("#CdMyGiftPhone").html(tpl("CdMyGiftPhoneTpl",b))})}function PcDataGetPhone(){rankListPhone(),TdGiftRecordPhone(),TdMyGiftPhone(),CdGiftRecordPhone(),CdMyGiftPhone()}var bRotateTd=!1,bRotateCd=!1,bRotateTdPhone=!1,bRotateCdPhone=!1,$beanBtn=$("#beanBtn li"),$awardBtn=$("#awardBtn li"),$pointerTd=$("#pointerTd"),$pointerCd=$("#pointerCd"),$pointerTdPhone=($("#rotateTd"),$("#rotateCd"),$("#pointerTdPhone")),$pointerCdPhone=$("#pointerCdPhone"),$tdgiftRecord=($("#rotateTdPhone"),$("#rotateCdPhone"),$("#tdChangeBtn li")),$cdgiftRecord=$("#cdChangeBtn li");with($("#linePro").height(Math.round($("#linePro").attr("data-totalInvest"))/1e6/12e3*600),$("#lineProPhone").height(Math.round($("#lineProPhone").attr("data-totalInvest"))/1e6/12e3*300),$beanBtn.on("click",function(a){var b=$(this),c=b.index();b.addClass("active").siblings("li").removeClass("active"),$("#beanCom").find(".leader-list:eq("+c+")").addClass("active").siblings(".leader-list").removeClass("active")}),$awardBtn.on("click",function(a){var b=$(this),c=b.index();b.addClass("active").siblings("li").removeClass("active"),$("#awardCom").find(".leader-list:eq("+c+")").addClass("active").siblings(".leader-list").removeClass("active")}),$tdgiftRecord.on("click",function(a){var b=$(this),c=b.index();b.addClass("active").siblings("li").removeClass("active"),$("#recordList").find(".record-model:eq("+c+")").addClass("active").siblings(".record-model").removeClass("active")}),$cdgiftRecord.on("click",function(a){var b=$(this),c=b.index();b.addClass("active").siblings("li").removeClass("active"),$("#beanList").find(".record-model:eq("+c+")").addClass("active").siblings(".record-model").removeClass("active")}),$pointerTd.on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-is-login");if("true"!=c)$("#tipList").show(),$("#noLogin").show();else{if(bRotateTd)return;$.ajax({url:"/activity/draw-tiandou",type:"POST",dataType:"json"}).done(function(a){if(0==a.data.returnCode){var b=a.data.tianDouPrize;switch(b){case"Cash20":rotateFnTd(0,56,"20元现金");break;case"Iphone6s":rotateFnTd(1,120,"iPhone 6s Plus");break;case"JingDong300":rotateFnTd(2,200,"300元京东购物卡");break;case"InterestCoupon5":rotateFnTd(3,260,"0.5%加息券");break;case"MacBook":rotateFnTd(4,337,"MacBook Air")}}else 1==a.data.returnCode?($("#tipList").show(),$("#TDnoUse").show()):($("#tipList").show(),$("#noLogin").show())}).fail(function(){layer.msg("请求失败")})}}),$("body").on("click",".go-close",function(a){a.preventDefault();var b=$(this),c=b.parents(".tip-list"),d=c.find(".tip-dom");c.hide(),d.hide()}),$pointerCd.on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-is-login");if("true"!=c)$("#tipList").show(),$("#noLogin").show();else{if(bRotateCd)return;$.ajax({url:"/activity/point-lottery",type:"POST",dataType:"json"}).done(function(a){if(!bRotateCd)switch(a){case"PointNotEnough":$("#tipList").show(),$("#NoCdbean").show();break;case"Cash5":rotateFnCd(1,80,"现金5元");break;case"AlreadyLotteryNotShare":$("#tipList").show(),$("#oneDay").show();break;case"ThankYou":rotateFnCd(3,173,"谢谢参与");break;case"Cash2":rotateFnCd(4,210,"现金2元");break;case"InterestCoupon2":rotateFnCd(5,255,"0.2%加息券");break;case"AlreadyLotteryShare":$("#tipList").show(),$("#onlyTwice").show();break;case"InvestCoupon3000":rotateFnCd(7,355,"3000元体验金")}}).fail(function(){layer.msg("请求失败")})}}),window._bd_share_config={common:{bdSize:"32",bdText:"霸道总裁送你钱！车！房！投资拿排名大奖！还能抽奖！百分百中奖哦！",bdPic:staticServer+"/images/sign/actor/ranklist/share-images.png",onAfterClick:function(a){$.ajax({url:"/activity/get-lottery-chance",type:"POST",dataType:"json"})}},share:{}},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="https://dn-iyz-file.qbox.me/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)];$("#countForm").validate({debug:!0,rules:{money:{required:!0,number:!0},month:{required:!0,number:!0}},messages:{money:{required:"请输入投资金额！",number:"请输入有效的数字！"},month:{required:"请输入投资时长！",number:"请输入有效的数字！"}},submitHandler:function(a){var b=Math.round($("#moneyNum").val()),c=Math.round($("#monthNum").val()),d=$("#resultNum"),e=b*c/12;d.text(e.toFixed(0))},errorPlacement:function(a,b){a.insertAfter(b.parent())}}),$(".close-cal").on("click",function(a){a.preventDefault();var b=$(this),c=b.parents(".td-calculator");c.slideUp("fast")}),$("#calBtn").on("click",function(a){a.preventDefault();var b=$(this),c=b.siblings(".td-calculator");c.slideDown("fast")}),$("#resetBtn").on("click",function(a){a.preventDefault(),$("#countForm").find(".int-text").val(""),$("#resultNum").text("0")}),$("#myTD").on("click",function(a){a.preventDefault();var b=($(this),$("#awardBtn").offset().top);$("body,html").animate({scrollTop:b},"fast",function(){$("#awardBtn li:eq(0)").trigger("click")})}),$("#myCD").on("click",function(a){a.preventDefault();var b=($(this),$("#awardBtn").offset().top);$("body,html").animate({scrollTop:b},"fast",function(){$("#awardBtn li:eq(1)").trigger("click")})});var scrollTimer;$(".scroll-record").hover(function(){clearInterval(scrollTimer)},function(){scrollTimer=setInterval(function(){scrollNews($(".scroll-record"))},2e3)}).trigger("mouseout"),$(".change-btn-list").on("click","strong",function(a){a.preventDefault();var b=$(this),c=b.index();b.addClass("active").siblings().removeClass("active"),$("#changeGift").find(".circle-list:eq("+c+")").show().siblings().hide()}),setInterval(function(){$(".gift-record").each(function(a,b){scrollGift($(this))})},2e3),$("body").on("click",".my-record dt",function(a){a.preventDefault();var b=$(this),c=b.parent().find("dd");b.hasClass("active")?(b.removeClass("active"),c.slideUp("fast")):(b.addClass("active"),c.slideDown("fast")),a.stopPropagation()}),$pointerTdPhone.on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-is-login");if("true"!=c)$("#tipListPhone").show(),$("#noLoginPhone").show();else{if(bRotateTdPhone)return;$.ajax({url:"/activity/draw-tiandou",type:"POST",dataType:"json"}).done(function(a){if(0==a.data.returnCode){var b=a.data.tianDouPrize;switch(b){case"Cash20":rotateFnTdPhone(0,56,"20元现金");break;case"Iphone6s":rotateFnTdPhone(1,120,"iPhone 6s Plus");break;case"JingDong300":rotateFnTdPhone(2,200,"300元京东购物卡");break;case"InterestCoupon5":rotateFnTdPhone(3,260,"0.5%加息券");break;case"MacBook":rotateFnTdPhone(4,337,"MacBook Air")}}else 1==a.data.returnCode?($("#tipListPhone").show(),$("#TDnoUsePhone").show()):($("#tipListPhone").show(),$("#noLoginPhone").show())}).fail(function(){layer.msg("请求失败")})}}),$pointerCdPhone.on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-is-login");if("true"!=c)$("#tipListPhone").show(),$("#noLoginPhone").show();else{if(bRotateCdPhone)return;$.ajax({url:"/activity/point-lottery",type:"POST",dataType:"json"}).done(function(a){if(!bRotateCdPhone)switch(a){case"PointNotEnough":$("#tipListPhone").show(),$("#NoCdbeanPhone").show();break;case"Cash5":rotateFnCdPhone(1,80,"现金5元");break;case"AlreadyLotteryNotShare":$("#tipListPhone").show(),$("#oneDayPhone").show();break;case"ThankYou":rotateFnCdPhone(3,173,"谢谢参与");break;case"Cash2":rotateFnCdPhone(4,210,"现金2元");break;case"InterestCoupon2":rotateFnCdPhone(5,255,"0.2%加息券");break;case"AlreadyLotteryShare":$("#tipListPhone").show(),$("#onlyTwicePhone").show();break;case"InvestCoupon3000":rotateFnCdPhone(7,355,"3000元体验金")}}).fail(function(){layer.msg("请求失败")})}}),$("#myTDPhone").on("click",function(a){a.preventDefault();var b=($(this),$("#awardBtnPhone").offset().top);$("body,html").animate({scrollTop:b},"fast",function(){$("#awardBtnPhone strong:eq(0)").trigger("click")})}),$("#myCDPhone").on("click",function(a){a.preventDefault();var b=($(this),$("#awardBtnPhone").offset().top);$("body,html").animate({scrollTop:b},"fast",function(){$("#awardBtnPhone strong:eq(1)").trigger("click")})}),PcDataGet(),PcDataGetPhone()});