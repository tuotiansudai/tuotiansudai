require(["jquery","rotate","layerWrapper","template","share","jquery.validate","jquery.validate.extension","jquery.ajax.extension"],function(a,b,c,d){function e(b,c,d){w=!w,a("#rotateTd").stopRotate(),a("#rotateTd").rotate({angle:0,animateTo:c+1800,duration:8e3,callback:function(){switch(a("#tipList").show(),p(),b){case 0:a("#twentyRMB").show();break;case 1:a("#iphone6s").show();break;case 2:a("#jdCard").show();break;case 3:a("#jiaxi").show();break;case 4:a("#macbookAir").show()}w=!w,a(".my-td-bean").each(function(b,c){a(this).text(Math.round(a(this).text().replace(/,/gi,""))-1e3)})}})}function f(b,c,d){x=!x,a("#rotateCd").stopRotate(),a("#rotateCd").rotate({angle:0,animateTo:c+1800,duration:8e3,callback:function(){switch(a("#tipList").show(),p(),b){case 1:a("#cdFive").show();break;case 2:a("#cdBaowen").show();break;case 3:a("#thankYou").show();break;case 4:a("#cdTwo").show();break;case 5:a("#percentCoupon").show();break;case 7:a("#freeMoney").show()}x=!x,a(".my-cd-bean").each(function(b,c){a(this).text(Math.round(a(this).text().replace(/,/gi,""))-1e3)})}})}function g(a){var b=a.find("ul.user-record"),c=b.find("li:first").height();b.find("li").length>15&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function h(a){var b=a.find("ul"),c=b.find("li:first").height();b.find("li").length>5&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function i(b,c,d){y=!y,a("#rotateTdPhone").stopRotate(),a("#rotateTdPhone").rotate({angle:0,animateTo:c+1800,duration:8e3,callback:function(){switch(a("#tipListPhone").show(),v(),b){case 0:a("#twentyRMBPhone").show();break;case 1:a("#iphone6sPhone").show();break;case 2:a("#jdCardPhone").show();break;case 3:a("#jiaxiPhone").show();break;case 4:a("#macbookAirPhone").show()}y=!y,a(".myphone-td-bean").each(function(b,c){a(this).text(Math.round(a(this).text().replace(/,/gi,""))-1e3)})}})}function j(b,c,d){z=!z,a("#rotateCdPhone").stopRotate(),a("#rotateCdPhone").rotate({angle:0,animateTo:c+1800,duration:8e3,callback:function(){switch(a("#tipListPhone").show(),v(),b){case 1:a("#cdFivePhone").show();break;case 2:a("#cdBaowenPhone").show();break;case 3:a("#thankYouPhone").show();break;case 4:a("#cdTwoPhone").show();break;case 5:a("#percentCouponPhone").show();break;case 7:a("#freeMoneyPhone").show()}z=!z,a(".myphone-cd-bean").each(function(b,c){a(this).text(Math.round(a(this).text().replace(/,/gi,""))-1e3)})}})}function k(){a.ajax({url:"/activity/getTianDouTop15",type:"POST",dataType:"json"}).done(function(b){a.each(b,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"});var c={rank:b};a("#rankList").html(d("rankListTpl",c))})}function l(){a.ajax({url:"/activity/getTianDouPrizeList",type:"POST",dataType:"json"}).done(function(b){a.each(b.other,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"}),a("#TdGiftRecord").html(d("TdGiftRecordTpl",b))})}function m(){a.ajax({url:"/activity/getMyTianDouPrize",type:"POST",dataType:"json"}).done(function(b){var c={tdmygift:b};a("#TdMyGift").html(d("TdMyGiftTpl",c))})}function n(){a.ajax({url:"/activity/getPointPrizeList",type:"POST",dataType:"json"}).done(function(b){a.each(b,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"});var c={cdgiftrecord:b};a("#CdGiftRecord").html(d("CdGiftRecordTpl",c))})}function o(){a.ajax({url:"/activity/getMyPointPrize",type:"POST",dataType:"json"}).done(function(b){var c={cdmygift:b};a("#CdMyGift").html(d("CdMyGiftTpl",c))})}function p(){k(),l(),m(),n(),o()}function q(){a.ajax({url:"/activity/getTianDouTop15",type:"POST",dataType:"json"}).done(function(b){a.each(b,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"});var c={rank:b};a("#rankListPhone").html(d("rankListPhoneTpl",c))})}function r(){a.ajax({url:"/activity/getTianDouPrizeList",type:"POST",dataType:"json"}).done(function(b){a.each(b.other,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"}),a("#TdGiftRecordPhone").html(d("TdGiftRecordPhoneTpl",b))})}function s(){a.ajax({url:"/activity/getMyTianDouPrize",type:"POST",dataType:"json"}).done(function(b){var c={tdmygift:b};a("#TdMyGiftPhone").length>0?a("#TdMyGiftPhone").html(d("TdMyGiftPhoneTpl",c)):!1})}function t(){a.ajax({url:"/activity/getPointPrizeList",type:"POST",dataType:"json"}).done(function(b){a.each(b,function(a,b){b.loginName=b.loginName.slice(0,3)+"******"});var c={cdgiftrecord:b};a("#CdGiftRecordPhone").html(d("CdGiftRecordPhoneTpl",c))})}function u(){a.ajax({url:"/activity/getMyPointPrize",type:"POST",dataType:"json"}).done(function(b){var c={cdmygift:b};a("#CdMyGiftPhone").length>0?a("#CdMyGiftPhone").html(d("CdMyGiftPhoneTpl",c)):!1})}function v(){q(),r(),s(),t(),u()}var w=!1,x=!1,y=!1,z=!1,A=a("#beanBtn li"),B=a("#awardBtn li"),C=a("#pointerTd"),D=a("#pointerCd"),E=(a("#rotateTd"),a("#rotateCd"),a("#pointerTdPhone")),F=a("#pointerCdPhone"),G=(a("#rotateTdPhone"),a("#rotateCdPhone"),a("#tdChangeBtn li")),H=a("#cdChangeBtn li");a("#linePro").height(Math.round(a("#linePro").attr("data-totalInvest"))/1e6/12e3*6e4),a("#lineProPhone").height(Math.round(a("#lineProPhone").attr("data-totalInvest"))/1e6/12e3*3e4),A.on("click",function(b){var c=a(this),d=c.index();c.addClass("active").siblings("li").removeClass("active"),a("#beanCom").find(".leader-list:eq("+d+")").addClass("active").siblings(".leader-list").removeClass("active")}),B.on("click",function(b){var c=a(this),d=c.index();c.addClass("active").siblings("li").removeClass("active"),a("#awardCom").find(".leader-list:eq("+d+")").addClass("active").siblings(".leader-list").removeClass("active")}),G.on("click",function(b){var c=a(this),d=c.index();c.addClass("active").siblings("li").removeClass("active"),a("#recordList").find(".record-model:eq("+d+")").addClass("active").siblings(".record-model").removeClass("active")}),H.on("click",function(b){var c=a(this),d=c.index();c.addClass("active").siblings("li").removeClass("active"),a("#beanList").find(".record-model:eq("+d+")").addClass("active").siblings(".record-model").removeClass("active")}),C.on("click",function(b){b.preventDefault();var d=a(this),f=d.attr("data-is-login");if("true"!=f)a("#tipList").show(),a("#noLogin").show();else{if(w)return;a.ajax({url:"/activity/draw-tiandou",type:"POST",dataType:"json"}).done(function(b){if(0==b.data.returnCode){var c=b.data.tianDouPrize;switch(c){case"Cash20":e(0,56,"20元现金");break;case"Iphone6s":e(1,120,"iPhone 6s Plus");break;case"JingDong300":e(2,200,"300元京东购物卡");break;case"InterestCoupon5":e(3,260,"0.5%加息券");break;case"MacBook":e(4,337,"MacBook Air")}}else 1==b.data.returnCode?(a("#tipList").show(),a("#TDnoUse").show()):(a("#tipList").show(),a("#noLogin").show())}).fail(function(){c.msg("请求失败")})}}),a("body").on("click",".go-close",function(b){b.preventDefault();var c=a(this),d=c.parents(".tip-list"),e=d.find(".tip-dom");d.hide(),e.hide()}),D.on("click",function(b){b.preventDefault();var d=a(this),e=d.attr("data-is-login");if("true"!=e)a("#tipList").show(),a("#noLogin").show();else{if(x)return;a.ajax({url:"/activity/point-lottery",type:"POST",dataType:"json"}).done(function(b){if(!x)switch(b){case"PointNotEnough":a("#tipList").show(),a("#NoCdbean").show();break;case"TtsdUDisk":f(1,80,"拓天速贷U盘");break;case"InsulationCup":f(2,32,"青花瓷保温杯");break;case"AlreadyLotteryNotShare":a("#tipList").show(),a("#oneDay").show();break;case"RedEnvelope2":f(3,173,"现金2元");break;case"MangoTravel100":f(4,210,"100元芒果旅游卡");break;case"InterestCoupon0.2":f(5,255,"0.2%加息券");break;case"AlreadyLotteryShare":a("#tipList").show(),a("#onlyTwice").show();break;case"InterestCoupon2":f(7,355,"2%加息券")}}).fail(function(){c.msg("请求失败")})}}),window._bd_share_config={common:{bdSize:"32",bdText:"霸道总裁送你钱！车！房！投资拿排名大奖！还能抽奖！百分百中奖哦！",bdPic:staticServer+"/images/sign/actor/ranklist/share-images.png",onAfterClick:function(b){a.ajax({url:"/activity/get-lottery-chance",type:"POST",dataType:"json"})}},share:{}},a("#countForm").validate({debug:!0,rules:{money:{required:!0,number:!0},month:{required:!0,number:!0}},messages:{money:{required:"请输入投资金额！",number:"请输入有效的数字！"},month:{required:"请输入投资时长！",number:"请输入有效的数字！"}},submitHandler:function(b){var c=Math.round(a("#moneyNum").val()),d=Math.round(a("#monthNum").val()),e=a("#resultNum"),f=c*d/12;e.text(f.toFixed(0))},errorPlacement:function(a,b){a.insertAfter(b.parent())}}),a(".close-cal").on("click",function(b){b.preventDefault();var c=a(this),d=c.parents(".td-calculator");d.slideUp("fast")}),a("#calBtn").on("click",function(b){b.preventDefault();var c=a(this),d=c.siblings(".td-calculator");d.slideDown("fast")}),a("#resetBtn").on("click",function(b){b.preventDefault(),a("#countForm").find(".int-text").val(""),a("#resultNum").text("0")}),a("#myTD").on("click",function(b){b.preventDefault();var c=(a(this),a("#awardBtn").offset().top);a("body,html").animate({scrollTop:c},"fast",function(){a("#awardBtn li:eq(0)").trigger("click")})}),a("#myCD").on("click",function(b){b.preventDefault();var c=(a(this),a("#awardBtn").offset().top);a("body,html").animate({scrollTop:c},"fast",function(){a("#awardBtn li:eq(1)").trigger("click")})});var I;a(".scroll-record").hover(function(){clearInterval(I)},function(){I=setInterval(function(){g(a(".scroll-record"))},2e3)}).trigger("mouseout"),a(".change-btn-list").on("click","strong",function(b){b.preventDefault();var c=a(this),d=c.index();c.addClass("active").siblings().removeClass("active"),a("#changeGift").find(".circle-list:eq("+d+")").show().siblings().hide()}),setInterval(function(){a(".gift-record").each(function(b,c){h(a(this))})},2e3),a("#TdMyGiftPhone").on("click",function(b){b.preventDefault();var c=a(this),d=c.find("dd");c.hasClass("active")?(c.removeClass("active"),d.slideUp("fast")):(c.addClass("active"),d.slideDown("fast"))}),a("#CdMyGiftPhone").on("click",function(b){b.preventDefault();var c=a(this),d=c.find("dd");c.hasClass("active")?(c.removeClass("active"),d.slideUp("fast")):(c.addClass("active"),d.slideDown("fast"))}),E.on("click",function(b){b.preventDefault();var d=a(this),e=d.attr("data-is-login");if("true"!=e)a("#tipListPhone").show(),a("#noLoginPhone").show();else{if(y)return;a.ajax({url:"/activity/draw-tiandou",type:"POST",dataType:"json"}).done(function(b){if(0==b.data.returnCode){var c=b.data.tianDouPrize;switch(c){case"Cash20":i(0,56,"20元现金");break;case"Iphone6s":i(1,120,"iPhone 6s Plus");break;case"JingDong300":i(2,200,"300元京东购物卡");break;case"InterestCoupon5":i(3,260,"0.5%加息券");break;case"MacBook":i(4,337,"MacBook Air")}}else 1==b.data.returnCode?(a("#tipListPhone").show(),a("#TDnoUsePhone").show()):(a("#tipListPhone").show(),a("#noLoginPhone").show())}).fail(function(){c.msg("请求失败")})}}),F.on("click",function(b){b.preventDefault();var d=a(this),e=d.attr("data-is-login");if("true"!=e)a("#tipListPhone").show(),a("#noLoginPhone").show();else{if(z)return;a.ajax({url:"/activity/point-lottery",type:"POST",dataType:"json"}).done(function(b){if(!z)switch(b){case"PointNotEnough":a("#tipListPhone").show(),a("#NoCdbeanPhone").show();break;case"TtsdUDisk":j(1,80,"拓天速贷U盘");break;case"InsulationCup":f(2,32,"青花瓷保温杯");break;case"AlreadyLotteryNotShare":a("#tipListPhone").show(),a("#oneDayPhone").show();break;case"RedEnvelope2":j(3,173,"现金2元");break;case"MangoTravel100":j(4,210,"100元芒果旅游卡");break;case"InterestCoupon0.2":j(5,255,"0.2%加息券");break;case"AlreadyLotteryShare":a("#tipListPhone").show(),a("#onlyTwicePhone").show();break;case"InterestCoupon2":j(7,355,"2%加息券")}}).fail(function(){c.msg("请求失败")})}}),a("#myTDPhone").on("click",function(b){b.preventDefault();var c=(a(this),a("#awardBtnPhone").offset().top);a("body,html").animate({scrollTop:c},"fast",function(){a("#awardBtnPhone strong:eq(0)").trigger("click")})}),a("#myCDPhone").on("click",function(b){b.preventDefault();var c=(a(this),a("#awardBtnPhone").offset().top);a("body,html").animate({scrollTop:c},"fast",function(){a("#awardBtnPhone strong:eq(1)").trigger("click")})}),p(),v()});