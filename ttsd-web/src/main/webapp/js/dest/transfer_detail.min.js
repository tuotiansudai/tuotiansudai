require(["jquery","pagination","layerWrapper","coupon-alert","red-envelope-float","jquery.ajax.extension"],function(a,b,c){a(function(){function b(a){c.msg(a)}var d=a(".errorTip");d.length>0&&""!=d.text()&&b(d.text()),a("#transferSubmit").on("click",function(b){b.preventDefault();var d=parseInt(a("#transferInvestId").val()),e=a("#amount").val(),f=a("#userBalance").val(),g=a(".transfer-detail-content");a.ajax({url:"/transfer/"+d+"/purchase-check",type:"GET",dataType:"json"}).done(function(b){"SUCCESS"==b.message?c.open({title:"温馨提示",btn:["确定"],content:"该项目已被承接，请选择其他项目。",btn1:function(a,b){c.closeAll(),location.href="/transfer-list"}}):"CANCEL"==b.message?c.open({title:"温馨提示",btn:["确定"],content:"该项目已被取消，请选择其他项目。",btn1:function(a,b){c.closeAll(),location.href="/transfer-list"}}):c.open({type:1,closeBtn:0,skin:"demo-class",title:"投资提示",shadeClose:!1,btn:["取消","确认"],area:["300px","160px"],content:'<p class="pad-m-tb tc">确认投资？</p>',btn1:function(){c.closeAll()},btn2:function(){var b=a("#transferForm");if("/transfer/purchase"===b.attr("action")){var c="INVESTOR"===g.data("user-role");if(!c)return location.href="/login?redirect="+encodeURIComponent(location.href),!1;var d=parseInt((100*f).toFixed(0))||0;if(parseInt((100*e).toFixed(0))>d)return location.href="/recharge",!1}b.submit()}})}).fail(function(){c.msg("请求失败")})})})});