require(["jquery","daterangepicker","moment","csrf"],function(a){function b(b){var c=a("#daterangepicker").val().split("~"),d=a.trim(c[0]),e=a.trim(c[1]),f=a(".query-type").find(".current").attr("data-value"),g="";if(f&&(g="&status="+f),""==d||"undefined"==d)var h="/loan?"+b+g;else var h="/loan?startDay="+d+"&endday="+e+"&page="+b+g;a.get(h,function(a){"success"===a.status})}function c(){var c=e,d=f,h=g,i=a(".start-end span.current").attr("day");i?(g>i?1==parseInt(i)?(d=f+1,h=g):(d=f+1,h=g-i):i==g?h=1:180==i?f+1>6?d=parseInt(f)-5:(d=12+f-5,c=e-1):30==i?f+1==2?(d=12,c=e-1):d=f:(f+1==2?(d=12,c=e-1):(d=f,c=e),i=i||0,g=g||0,h=30+g-i),a("#daterangepicker").val(c+"-"+d+"-"+h+"~"+(e+"-"+parseInt(f+1)+"-"+g))):a("#daterangepicker").val(""),b(1)}var d=new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate();a("#daterangepicker").dateRangePicker({separator:" ~ "}).val(e+"-"+parseInt(f+1)+"-"+g+"~"+(e+"-"+parseInt(f+1)+"-"+g)),b(1),a(".start-end .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),c()}),a(".query-type .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),b(1)}),a(".apply-btn").click(function(){b(1)}),a(".plan").click(function(){var b=a(this).attr("data-loan"),c="";return a.get(b,function(b){if(b.status){for(var d=b.data,e=0;e<d.length;e++){if(d[e].isEnabled)var f='<a href = "">待还款</a>';else var f="";var g=d[e].corpus+d[e].actualInterest+d[e].expectedInterest+d[e].defaultInterest;c+="<tr><td>"+d[e].period+"</td><td>"+d[e].corpus+"</td><td>"+d[e].expectedInterest+"</td><td>"+d[e].actualInterest+"</td> <td>"+d[e].defaultInterest+"</td> <td>"+g+"</td> <td>"+d[e].repayDate+"</td> <td>"+d[e].actualRepayDate+"</td><td>"+d[e].status+"</td><td>"+f+"</td></tr>"}a(".table-list tbody").find("tr").remove(),a(".table-list tbody").append(c)}}),a(".layer-box").show(),!1}),a(".layer-box .close").click(function(){return a(".layer-box").hide(),!1}),a(".layer-fix").click(function(){a(".layer-box").hide()})});