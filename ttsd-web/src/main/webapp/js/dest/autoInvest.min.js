require(["jquery","layer","autoNumeric","lodash","commonFun"],function(a,b){a(function(){if(a("#btnAuthority").length){var c=a("#btnAuthority");c.click(function(){b.open({type:1,title:"自动投标授权",area:["450px","150px"],shadeClose:!0,content:a(".auto-invest")}),a("#finishAuthor").click(function(){location.href="http://localhost:8080/investor/auto-invest/plan"})})}if(a("#planSwitchDom").length){var d=a("#planSwitchDom"),e=a(".switchBtn",d),f=a("label.radio",e),g=a(".projectLimit",d),h=a('input[type="radio"]',d),i=a("#saveInvestPlan"),j=a("#signPlanForm");commonFun.initRadio(h,f),f.click(function(b){var c=a(this),e=c.prev("input").val();1==e?d.find("dl").show().siblings().show():d.find("dl").first().show().siblings().hide()});var k=function(){var b,c=[];return g.find("span.active").each(function(){var b=a(this);c.push(b.attr("value"))}),b=_.sum(c)},l=function(){var b=k(),c=a('input[type="number"]',j).serializeArray(),d=_.map(c,"value");b>0&&!_.isEmpty(d[0])&&!_.isEmpty(d[1])&&!_.isEmpty(d[2])?i.prop("disabled",!1).addClass("btn-normal"):i.prop("disabled",!0).removeClass("btn-normal")};g.find("span").click(function(){var b=a(this);b.toggleClass("active"),l()}),a("input",j).bind("keyup",function(){l()}),i.click(function(){var b=j.serialize(),c=commonFun.parseURL("htt://test?"+b).params,d=c.planKind,e=c.investMin,f=c.investMax,g=c.ReservedAmount,h=c.agreement,i=k(),l={status:d,min:e,max:f,price:g,duration:i,agreement:h};a.ajax({url:url,data:l,type:"POST",dataType:"json"}).done(function(a){})})}a("#editSetting").length&&a("#editSetting").click(function(){var a=location.href.replace(/plan-detail/,"plan");location.href=a})})});