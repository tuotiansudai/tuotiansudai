require(["jquery","csrf","autoNumeric","lodash","commonFun"],function(a){a(function(){if(a("#btnAuthority").length){var b=a("#btnAuthority");b.click(function(){var b='<div cass="auto-invest"><button id="finishAuthor" class="btn btn-normal">已完成授权</button></div>';commonFun.popWindow("自动投标授权",b,{width:"450px"}),a("body").delegate("#finishAuthor","click",function(){location.href="http://localhost:8080/investor/auto-invest/plan"})})}if(a("#planSwitchDom").length){var c=a("#planSwitchDom"),d=a(".switchBtn",c),e=a("label.radio",d),f=a(".projectLimit",c),g=a('input[type="radio"]',c),h=a("#saveInvestPlan"),i=a("#signPlanForm");commonFun.initRadio(g,e),e.click(function(b){var d=a(this),e=d.prev("input").val();1==e?c.find("dl").show().siblings().show():c.find("dl").first().show().siblings().hide()});var j=function(){var b,c=[];return f.find("span.active").each(function(){var b=a(this);c.push(b.attr("value"))}),b=_.sum(c)},k=function(){var b=j(),c=a('input[type="number"]',i).serializeArray(),d=_.map(c,"value");b>0&&!_.isEmpty(d[0])&&!_.isEmpty(d[1])&&!_.isEmpty(d[2])?h.prop("disabled",!1):h.prop("disabled",!0)};f.find("span").click(function(){var b=a(this);b.toggleClass("active"),k()}),a("input",i).bind("keyup",function(){k()}),h.click(function(){var b=i.serialize(),c=commonFun.parseURL("htt://test?"+b).params,d=c.planKind,e=c.investMin,f=c.investMax,g=c.ReservedAmount,h=c.agreement,k=j(),l={status:d,min:e,max:f,price:g,duration:k,agreement:h};a.ajax({url:url,data:l,type:"POST",dataType:"json"}).done(function(a){})})}a("#editSetting").length&&a("#editSetting").click(function(){var a=location.href.replace(/plan-detail/,"plan");location.href=a})})});