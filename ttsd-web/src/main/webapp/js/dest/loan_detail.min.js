require(["jquery","pagination","mustache","text!/tpl/loan-invest-list.mustache","csrf","autoNumeric"],function(a,b,c,d){a(function(){function b(b){window.setInterval(function(){var c=0,d=0,e=0,f=0;1800>=b&&(b>0?(e=Math.floor(b/60)-24*c*60-60*d,f=Math.floor(b)-24*c*60*60-60*d*60-60*e):a(".btn-pay").removeClass("grey").removeAttr("disabled").html("马上投资"),9>=e&&(e="0"+e),9>=f&&(f="0"+f),a("#minute_show").html("<s></s>"+e+"分"),a("#second_show").html("<s></s>"+f+"秒"),b--)},1e3)}var e=a(".text-input-amount");e.autoNumeric("init");var f=a(".pagination"),g=function(b){var e={index:b||1};f.loadPagination(e,function(b){if(b.status){var e=c.render(d,b);a(".loan-list-con table").html(e)}})};java_point<=50?(a(".chart-box .rount").css("webkitTransform","rotate("+3.6*java_point+"deg)"),a(".chart-box .rount2").hide()):(a(".chart-box .rount").css("webkitTransform","rotate(180deg)"),a(".chart-box .rount2").show(),a(".chart-box .rount2").css("webkitTransform","rotate("+3.6*(java_point-50)+"deg)"));var h=a(".nav li");h.click(function(){var b=a(this);h.removeClass("active"),b.addClass("active");var c=b.index();1===c&&g(),a(".loan-list .loan-list-con").removeClass("active").eq(c).addClass("active")}),a(".img-list li").click(function(){var b=a(this).find("img").attr("src");return a(".content img").attr("src",b),a(".layer-box").show(),!1}),a(".layer-wrapper").click(function(){a(".layer-box").hide()}),a(function(){"PREHEAT"==a("#loanStatus").val()&&b(intDiff)}),a('form .btn-pay[type="submit"]').click(function(){var b=Number(a('form input[name="amount"]').val()),c=Number(a("form i.account-amount").text());return b>c?(location.href="/recharge",!1):!0}),e.blur(function(){var b=a(".hid-loan").val(),c=a(this).val(),d=Number(a(".amountNeedRaised-i").text());return d<parseFloat(c)?(a(".loan-detail-error-msg").html("<i class='loan-detail-error-msg-li'>x</i>输入金额不能大于可投金额!").removeAttr("style"),void a(".btn-pay").attr("disabled","disabled").addClass("grey")):void a.ajax({url:"/calculate-expected-interest/loan/"+b+"/amount/"+c,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){a(".loan-detail-error-msg").hide(),a(".expected-interest").html(b),a(".btn-pay").removeClass("grey").removeAttr("disabled")})})})});