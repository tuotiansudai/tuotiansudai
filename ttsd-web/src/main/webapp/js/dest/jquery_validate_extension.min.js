require(["jquery","jquery.validate"],function(a){var b=function(b,c,d){var e=!1,f=d.validator,g=d.element,h=f.previousValue(g),i=d.errorMessage;a.ajax({url:b,type:"GET",dataType:"json",error:function(a){h.valid=e,f.stopRequest(g,e)},success:function(b){if(e=c(b)){var d=f.formSubmitted;f.prepareElement(g),f.formSubmitted=d,f.successList.push(g),delete f.invalid[g.name],f.showErrors()}else{var j={};j[g.name]=h.message=a.isFunction(i)?i(value):i,f.invalid[g.name]=!0,f.showErrors(j)}h.valid=e,f.stopRequest(g,e)}})},c=function(c,d,e){var f=this.previousValue(d),g=this;if(f.old===c)return f.valid;f.old=c,this.startRequest(d);var h=g.defaultMessage(d,"isExist"),i=function(a){return a.success&&!a.data.status},j=a.validator.format(e);return b(j(encodeURIComponent(c)),i,{validator:g,element:d,errorMessage:h}),"pending"},d=function(c,d,e){var f=this.previousValue(d),g=this;if(""===a('.register-user-form input[name="referrer"]').val())return g.showErrors(),"pending";if(f.old===c)return f.valid;f.old=c,this.startRequest(d);var h=g.defaultMessage(d,"isNotExist"),i=function(a){return a.success&&a.data.status},j=a.validator.format(e);return b(j(encodeURIComponent(c)),i,{validator:g,element:d,errorMessage:h}),"pending"},e=function(c,d,e){var f=this.previousValue(d),g=this;if(f.old===c)return f.valid;f.old=c,this.startRequest(d);var h=g.defaultMessage(d,"imageCaptchaVerify"),i=function(a){return a.success&&a.data.status},j=a.validator.format(e);return b(j(c),i,{validator:g,element:d,errorMessage:h}),"pending"},f=function(c,d,e){var f=this.previousValue(d),g=this,h=g.check('input[name="mobile"]');if(!h)return!1;if(f.old===c)return f.valid;f.old=c,this.startRequest(d);var i=g.defaultMessage(d,"captchaVerify"),j=function(a){return a.success&&a.data.status},k=a.validator.format(e);return b(k(c),j,{validator:g,element:d,errorMessage:i}),"pending"};a.validator.addMethod("regex",function(a,b,c){return this.optional(b)||c.test(a)},"请检查您的输入"),a.validator.addMethod("isExist",function(a,b,d){return c.call(this,a,b,d)},a.validator.format("该记录已存在")),a.validator.addMethod("isNotExist",function(a,b,c){return d.call(this,a,b,c)},a.validator.format("该记录已存在")),a.validator.addMethod("captchaVerify",function(a,b,c){return f.call(this,a,b,c)},a.validator.format("手机验证码不正确")),a.validator.addMethod("imageCaptchaVerify",function(a,b,c){return e.call(this,a,b,c)},a.validator.format("图形验证码不正确"))});