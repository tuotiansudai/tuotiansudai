require(["jquery","underscore","moment","daterangepicker"],function(a,b,c){a(function(){if(!a("#instructions").length)return!1;a("#instructions").find(".item").on("mouseover",function(){var b=a(this);b.addClass("active").siblings().removeClass("active")});var d=(a("#date-time-picker").dateRangePicker({separator:" ~ "}).on("datepicker-change",function(a,b){f({startTime:c(b.date1).format("YYYY-MM-DD"),endTime:c(b.date2).format("YYYY-MM-DD")})}),a("#tpl").html()),e=a("#tbody"),f=function(c,f){a.ajax({url:"/membership/structure-list-data",data:c||""}).done(function(a){e.html(b.template(d)({data:a})),f&&f()}).fail(function(a){console.error(a,"获取数据失败!")})};f(),a("#filter-btns").find("span").on("click",function(){var b=a(this),d=b.data("type");if(a("#date-time-picker").data("dateRangePicker").clear(),"all"==d)f(null,function(){b.addClass("active").siblings().removeClass("active")});else{var e=c();f({endTime:e.format("YYYY-MM-DD"),startTime:e.subtract(parseInt(d),"days").format("YYYY-MM-DD")},function(){b.addClass("active").siblings().removeClass("active")})}})})});