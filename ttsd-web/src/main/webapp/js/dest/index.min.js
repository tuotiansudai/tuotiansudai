require(["jquery","underscore","layerWrapper","superslide","jquery.ajax.extension","commonFun","coupon-alert","red-envelope-float","count_down","jquery.validate","autoNumeric"],function(a,b,c){function d(a,b){return 180*Math.atan2(b,a)/Math.PI}function e(a,b,c,e){var f=b-e,g=c-a,h=0;if(Math.abs(g)<2&&Math.abs(f)<2)return h;var i=d(g,f);return i>=-45&&i<45?h=4:i>=45&&i<135?h=1:i>=-135&&i<-45?h=2:(i>=135&&i<=180||i>=-180&&i<-135)&&(h=3),h}a(function(){function d(a){var b=a.find("ul:first"),c=b.find("li:first").height();b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function f(){var b=a(this).data("name");switch(b){case"/activity/landing-page":cnzzPush.trackClick("83首页","Banner模块","landingpage");break;case"/activity/rank-list":cnzzPush.trackClick("27首页","Banner模块","排行榜");break;case"/activity/birth-month":cnzzPush.trackClick("23首页","Banner模块","生日月");break;case"/activity/share-reward":cnzzPush.trackClick("74首页","Banner模块","推荐奖励");break;case"http://www.iqiyi.com/w_19rt7ygfmh.html#vfrm=8-8-0-1":cnzzPush.trackClick("25首页","Banner模块","上市");break;case"/activity/recruit":cnzzPush.trackClick("26首页","Banner模块","代理");break;case"/activity/app-download":cnzzPush.trackClick("83首页","Banner模块","app")}}var g,h,i,j=a(".banner-box"),k=a(".banner-img-list",j),l=(a(".register-ad-box",j),a(".scroll-num",j)),m=a("#productFrame"),n=a(".dl-amount",m),o=a("li",l),p=k.find("li"),q=null,r=0,s=a(".book-invest-form"),t=a(".project-transfer-frame");n.find("i").filter(function(b){var c=a(this).text(),d=c.replace(/[^\d|.]*/g,"");return d.length>5}).css({"font-size":"16px"}),g=a(window).width(),h=p.first().find("img").width(),i=(h-g)/2,k.find("img").css({"margin-left":"-"+i+"px"}),a(".product-box .pad-m").click(function(){window.location.href=a(this).data("url")});var u=commonFun.browserRedirect();"pc"==u?(k.find("img.iphone-img").remove(),a("#bannerBox").slide({mainCell:".bd ul",effect:"leftLoop",autoPlay:!0})):"mobile"==u&&(k.find("img.pc-img").remove(),l.css({left:(g-25*l.find("li").length)/2,visibility:"visible"}),o.click(function(){var b=o.index(this);a(this).addClass("on").siblings().removeClass("on"),p.eq(b).fadeIn(500).siblings().fadeOut(500)}),j.hover(function(){clearInterval(q)},function(){q=setInterval(function(){var a=++r%p.length;o.eq(a).trigger("click")},6e3)}).trigger("mouseleave"),function(){var a,b;j.on("touchstart",function(c){a=c.originalEvent.changedTouches[0].pageX,b=c.originalEvent.changedTouches[0].pageY}),j.on("touchmove",function(a){a.preventDefault()}),j.on("touchend",function(c){var d,f;d=c.originalEvent.changedTouches[0].pageX,f=c.originalEvent.changedTouches[0].pageY;var g=e(a,b,d,f);switch(g){case 3:var h=++r%p.length;o.eq(h).trigger("click");break;case 4:var h=--r%p.length;o.eq(h).trigger("click")}})}());var v;a(".scroll-top").hover(function(){clearInterval(v)},function(){v=setInterval(function(){d(a(".scroll-top"))},2e3)}).trigger("mouseout"),a(".web-book-box,.book-text-tip").on("click",function(b){b.preventDefault(),c.open({title:"预约投资",type:1,skin:"book-box-layer",area:["500px"],content:a(".book-invest-box")})}),a(".loan-btn").on("click","li",function(b){b.preventDefault(),window.location.href=a(this).data("url")}),a(".new-user-free,.product-box-tran").on("click",function(b){b.preventDefault(),window.location.href=a(this).attr("data-url")}),a(".mask-btn").on("click",function(b){b.preventDefault(),a(".new-user-free").removeClass("active")}),a(".guide-btn").on("click",function(b){b.preventDefault(),a(".product-box-inner").removeClass("active")}),a("input.autoNumeric").autoNumeric("init"),s.validate({focusInvalid:!1,errorPlacement:function(a,b){c.tips(a.text(),b,{tips:[1,"#efbf5c"],time:3e3,tipsMore:!0,area:"auto",maxWidth:"500"})},rules:{productType:{required:!0},bookingAmount:{required:!0,number:!0}},messages:{productType:{required:"请选择您希望投资的项目"},bookingAmount:{required:"请输入预计投资金额",number:"请输入正确的投资金额"}},submitHandler:function(b){var d=a(b).serialize();return a.ajax({url:"/booking-loan/invest?"+d,type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(a){a.data.status&&(c.closeAll(),c.msg("<h2>恭喜您预约成功！</h2> 当有可投项目时客服人员会在第一时间与您联系，请您耐心等候并保持电话畅通。",{time:6e3,icon:1,tips:[1,"#efbf5c"]}))}).fail(function(a){c.alert("接口错误")}),!1}}),a.ajax({url:"/transfer-list/homePage",data:{index:1,pageSize:2},type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(c){var d=a("#transerTpl").html(),e=a("#transerTplMobile").html(),f=b.template(d),g=b.template(e),h={};h.list=c;var i=f(h),j=g(h),k=t.find(".loan-box-inner"),l=a(".project-transfer-mobile");k.html(i),l.html(j)}),a(".banner-img-list a").on("click",f)})});