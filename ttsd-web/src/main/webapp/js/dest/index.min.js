require(["jquery","underscore","layerWrapper","superslide","jquery.ajax.extension","commonFun","coupon-alert","red-envelope-float","count_down","jquery.validate","autoNumeric"],function(a,b,c){function d(a,b){return 180*Math.atan2(b,a)/Math.PI}function e(a,b,c,e){var f=b-e,g=c-a,h=0;if(Math.abs(g)<2&&Math.abs(f)<2)return h;var i=d(g,f);return i>=-45&&i<45?h=4:i>=45&&i<135?h=1:i>=-135&&i<-45?h=2:(i>=135&&i<=180||i>=-180&&i<-135)&&(h=3),h}a(function(){function b(a){var b=a.find("ul:first"),c=b.find("li:first").height();b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}function d(){var b=a(this).data("name");switch(b){case"/activity/landing-page":cnzzPush.trackClick("83首页","Banner模块","landingpage");break;case"/activity/rank-list":cnzzPush.trackClick("27首页","Banner模块","排行榜");break;case"/activity/birth-month":cnzzPush.trackClick("23首页","Banner模块","生日月");break;case"/activity/share-reward":cnzzPush.trackClick("74首页","Banner模块","推荐奖励");break;case"http://www.iqiyi.com/w_19rt7ygfmh.html#vfrm=8-8-0-1":cnzzPush.trackClick("25首页","Banner模块","上市");break;case"/activity/recruit":cnzzPush.trackClick("26首页","Banner模块","代理");break;case"/activity/app-download":cnzzPush.trackClick("83首页","Banner模块","app")}}var f,g,h,i=a(".banner-box"),j=a(".banner-img-list",i),k=(a(".register-ad-box",i),a(".scroll-num",i)),l=a("#productFrame"),m=a(".dl-amount",l),n=a("li",k),o=j.find("li"),p=null,q=0,r=a(".book-invest-form");m.find("i").filter(function(b){var c=a(this).text(),d=c.replace(/[^\d|.]*/g,"");return d.length>5}).css({"font-size":"16px"}),f=a(window).width(),g=o.first().find("img").width(),h=(g-f)/2,j.find("img").css({"margin-left":"-"+h+"px"}),a(".product-box .pad-m").click(function(){window.location.href=a(this).data("url")});var s=commonFun.browserRedirect();"pc"==s?(j.find("img.iphone-img").remove(),a("#bannerBox").slide({mainCell:".bd ul",effect:"leftLoop",autoPlay:!0})):"mobile"==s&&(j.find("img.pc-img").remove(),k.css({left:(f-25*k.find("li").length)/2,visibility:"visible"}),n.click(function(){var b=n.index(this);a(this).addClass("on").siblings().removeClass("on"),o.eq(b).fadeIn(500).siblings().fadeOut(500)}),i.hover(function(){clearInterval(p)},function(){p=setInterval(function(){var a=++q%o.length;n.eq(a).trigger("click")},6e3)}).trigger("mouseleave"),function(){var a,b;i.on("touchstart",function(c){a=c.originalEvent.changedTouches[0].pageX,b=c.originalEvent.changedTouches[0].pageY}),i.on("touchmove",function(a){a.preventDefault()}),i.on("touchend",function(c){var d,f;d=c.originalEvent.changedTouches[0].pageX,f=c.originalEvent.changedTouches[0].pageY;var g=e(a,b,d,f);switch(g){case 3:var h=++q%o.length;n.eq(h).trigger("click");break;case 4:var h=--q%o.length;n.eq(h).trigger("click")}})}());var t;a(".scroll-top").hover(function(){clearInterval(t)},function(){t=setInterval(function(){b(a(".scroll-top"))},2e3)}).trigger("mouseout"),a(".web-book-box,.book-text-tip").on("click",function(b){b.preventDefault(),c.open({title:"预约投资",type:1,skin:"book-box-layer",area:["500px"],content:a(".book-invest-box")})}),a(".loan-btn li").on("click",function(b){b.preventDefault(),window.location.href=a(this).attr("data-url")}),a(".new-user-free").on("click",function(b){b.preventDefault(),window.location.href=a(this).attr("data-url")}),a(".mask-btn").on("click",function(b){b.preventDefault(),a(".new-user-free").removeClass("active")}),a(".guide-btn").on("click",function(b){b.preventDefault(),a(".product-box-inner").removeClass("active")}),a("input.autoNumeric").autoNumeric("init"),r.validate({focusInvalid:!1,errorPlacement:function(a,b){c.tips(a.text(),b,{tips:[1,"#efbf5c"],time:3e3,tipsMore:!0,area:"auto",maxWidth:"500"})},rules:{productType:{required:!0},bookingAmount:{required:!0,number:!0}},messages:{productType:{required:"请选择您希望投资的项目"},bookingAmount:{required:"请输入预计投资金额",number:"请输入正确的投资金额"}},submitHandler:function(b){var d=a(b).serialize();return a.ajax({url:"/booking-loan/invest?"+d,type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(a){a.data.status&&c.closeAll()}).fail(function(a){c.alert("接口错误")}),!1}}),a(".banner-img-list a").on("click",d)})});