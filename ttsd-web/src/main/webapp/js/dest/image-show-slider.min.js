define([],function(){function a(b){if("object"!=typeof b)return b;if(null==b)return b;var c=new Object;for(var d in b)c[d]=a(b[d]);return c}function b(){var b=arguments;if(!(b.length<2)){for(var c=a(b[0]),d=1;d<b.length;d++)for(var e in b[d])c[e]=b[d][e];return c}}function c(a,b,c){this.minRange=Number(b),this.count=c,this.bigbox=document.getElementById(a),this.ready_moved=!0,this.imglist=this.bigbox.getElementsByTagName("ul")[0].children}function d(a){var c,d={element:"noticeList",lh:"40",speed:"20",delay:"1500",isMove:!1};this.options=b(d,a),this.scrollDom=document.getElementById(this.options.element),this.options.lh=this.scrollDom.clientHeight,this.init=function(){var a=this.scrollDom;a.innerHTML+=a.innerHTML,a.style.marginTop=0,a.onmouseover=function(){this.options.isMove=!0}.bind(this),a.onmouseout=function(){this.options.isMove=!1}.bind(this),setTimeout(this.start.bind(this),this.options.delay)},this.start=function(){var a=this;c=setInterval(a.scrolling.bind(this),a.options.speed),a.options.isMove||(a.scrollDom.style.marginTop=parseInt(a.scrollDom.style.marginTop)-1+"px")},this.scrolling=function(){var a=this.scrollDom;parseInt(a.style.marginTop)%this.options.lh!=0?(a.style.marginTop=parseInt(this.scrollDom.style.marginTop)-1+"px",Math.abs(parseInt(a.style.marginTop))>=a.scrollHeight/2&&(a.style.marginTop=0)):(clearInterval(c),setTimeout(this.start.bind(this),this.options.delay))}.bind(this)}return c.prototype={boxul:null,imglist:null,numlist:null,prev:0,index:0,timer:null,play:null,$:function(a){return"string"==typeof a?a.indexOf("#")>=0?(a=a.replace("#",""),document.getElementById(a)?document.getElementById(a):(alert("没有容器"+a),null)):document.createElement(a):a},info:function(){for(var a=this.$("ul"),b=1;b<=this.count;b++){var c=this.$("li");a.appendChild(c)}this.bigbox.appendChild(a),this.boxul=this.bigbox.getElementsByTagName("ul"),this.boxul[1].className="countNum",this.numlist=this.boxul[1].getElementsByTagName("li"),this.boxul[1].style.left=(document.body.scrollWidth-25*this.count)/2+"px";for(var b=0;b<this.count;b++)this.alpha(b,0);this.alpha(0,100),this.numlist[0].className="current",this.action()},action:function(){this.autoplay(),this.mouseoverout(),this.bindTouchEvn()},fadeIn:function(a){a.classList.add("fadeIn")},fadeOut:function(a){Array.prototype.forEach.call(a,function(a){a.className=""})},imgshow:function(){clearInterval(this.timer);for(var a=100,b=0,c=0;c<this.numlist.length;c++)this.numlist[c].className="",this.imglist[c].className="";this.numlist[this.index].className="current",this.imglist[this.index].className="active";for(var d=0;d<this.count;d++)this.alpha(d,0);this.alpha(this.prev,100),this.alpha(this.index,0),this.timer=setInterval(function(){b+=2,a-=2,b>100&&(b=100),a<0&&(a=100),this.alpha(this.prev,a),this.alpha(this.index,b),100==b&&0==a&&clearInterval(this.timer)}.bind(this),20)},alpha:function(a,b){this.imglist[a].style.opacity=b/100,this.imglist[a].style.filter="alpha(opacity="+b+")"},autoplay:function(){this.play&&clearInterval(this.play),this.play=setInterval(function(){this.prev=this.index,this.index++,this.index>this.count-1&&(this.index=0),this.imgshow()}.bind(this),5e3)},mouseoverout:function(){var a=this;a.bigbox.onmouseover=function(b){clearInterval(a.play)},a.bigbox.onmouseout=function(){a.autoplay(a.index)};for(var b=0,c=a.numlist.length;b<c;b++)!function(b){a.numlist[b].index=b,a.numlist[b].onmouseover=function(b){clearInterval(a.play),b.stopPropagation();var c=b?b:window.event;window.event?c.cancelBubble=!0:c.stopPropagation(),a.index=b.target.index,a.imgshow()}}(b)},bindTouchEvn:function(){this.boxul[0].addEventListener("touchstart",this.touchstart.bind(this),!1),this.boxul[0].addEventListener("touchmove",this.touchmove.bind(this),!1),this.boxul[0].addEventListener("touchend",this.touchend.bind(this),!1)},touchstart:function(a){if(this.ready_moved){var b=a.touches[0];this.touchX=b.pageX,this.ready_moved=!1,console.log(this.play),clearInterval(this.play)}},touchmove:function(a){var b=this.minRange,c=this.touchX,d=this.count;if(!this.ready_moved){var e=a.changedTouches[0],f=e.pageX;f+b<c?(this.ready_moved=!0,this.index>=d-1?this.index=0:this.index++,this.imgshow(this.index)):f-b>c&&(this.index<=0&&(this.index=d+1),this.index--,this.imgshow(this.index),this.ready_moved=!0)}},touchend:function(a){var b=this.minRange,c=this.touchX,d=this.count;if(!this.ready_moved){var e=a.changedTouches[0],f=e.pageX;f+b<c?(this.ready_moved=!0,this.index>d-1?this.index=0:this.index++,this.imgshow(this.index)):f-b>c&&(this.index<=1&&(this.index=d+1),this.index--,this.imgshow(this.index),this.ready_moved=!0)}this.autoplay(this.index)}},{runImg:c,startMarquee:d}});