require(["jquery","mustache","text!/tpl/message-list.mustache","pagination","layerWrapper","jquery.ajax.extension"],function(a,b,c,d,e){a(function(){var d=a(".pagination"),e=d.data("page-index"),f=window.location.hash;f&&(e=f.substr(1,f.length)),d.loadPagination({index:e},function(d){window.location.hash=d.index,d.messageTypeHandler=function(){return function(a,b){return"ACTIVITY"==b(a)?"活动通知":"NOTIFY"==b(a)?"拓天公告":"系统消息"}};var e=b.render(c,d);a(".list-container .global-message-list.active").html(e),a(".read-all-messages").click(function(){a.ajax({url:"/message/read-all",type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(a){a.data.status&&window.location.reload()})}),function(){var b=a("#userMessageList");b.on("click",".jump-detail",function(){var b=a(this),c=b.data("url");location.href=c}),b.on("click","a",function(a){a.preventDefault()})}()})})});