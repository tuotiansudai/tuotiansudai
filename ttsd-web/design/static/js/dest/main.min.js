require.config({baseUrl:"../js",paths:{jquery:"libs/jquery-1.10.1.min"}}),require(["jquery"],function(a){a(function(){function b(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=c.exec(b)&&(a=parseFloat(RegExp.$1)),a}}var c=a(window).height();b()<9&&a(function(){a(".warning_mask").css("display","block").css("height",c),a(".Warning").css("display","block")})}),a(function(){var b;a("#nav_mouseover").hover(function(){clearTimeout(b),b=setTimeout(function(){a(".subnav").stop().slideDown(300)},0)},function(){clearTimeout(b),b=setTimeout(function(){a(".subnav").stop().slideUp(300)},300)})}),a(function(){a(function(){function b(){a("#align").html("1.没收到验证邮件？"+f+"<i>秒后重新发送</i>"),0==f&&(clearInterval(g),a("#mask").css("display","none"),a("#email_yz").css("display","none")),f--}var c=a("#text1"),d=a("#tip");c.focus(function(){d.css("display","none")}),c.blur(function(){""==c.val()&&d.css("display","block")}),d.on("click",function(){d.css("display","none"),c.focus()});var e=a(window).height();a("#mask").css("height",e),a("#send,.confirm").on("click",function(){a("#mask").css("display","block"),a("#email_yz,.bind_card").css("display","block"),a("#toemail").html(a("#text1").val())}),a("#close ,.close2, #mask ,.now").on("click",function(){a("#mask,.bind_card").css("display","none"),a("#email_yz,.bind_card").css("display","none")});var f=30,g=setInterval(b,1e3)})}),a(function(){a("#money").blur(function(){var b=a("#money").val();a.isNumeric(b)?(a(".em_ts").css("display","block"),a("#span_c").css("display","none"),50>b?(a(".em_ts").css("display","none"),a("#span_b").css("display","block")):(a(".em_ts").css("display","block"),a("#span_b").css("display","none"))):(a(".em_ts").css("display","none"),a("#span_c").css("display","block"),a("#span_b").css("display","none")),""===b&&(a(".em_ts").css("display","block"),a("#span_b").css("display","none"),a("#span_c").css("display","none")),""!=b&&b>=50&&a.isNumeric(b)?a(".confirm").css("background","#ff7a2a").css("pointer-events","auto"):a(".confirm").css("background","#666666").css("pointer-events","none")})}),a(function(){a(".recharge_cz").on("blur",function(){""===a(".recharge_cz").val()?a(".recharge_qr").css("background","#666666"):a(".recharge_qr").css("background","#ff7a2a")})}),a(function(){a(function(){a(".send_vcode").on("click",function(){function b(){a(".send_vcode").html(c+"秒后重新发送"),0==c&&(clearInterval(d),a(".send_vcode").html("重新发送验证码")),c--}var c=30,d=setInterval(b,1e3)})}),a(function(){function b(b){var c=/^(?![^a-zA-Z]+$)(?!\D+$).{5,24}$/;c.test(b)?(a(".step_username em").css({opacity:1}),a(".step_username b").css({opacity:0})):(a(".step_username b").css({opacity:1}),a(".step_username em").css({opacity:0}))}a(".username").on("blur",function(){b(a(this).val()),a(".step_username b").css({lineHeight:"20px"}),""==a(this).val()?a(".step_username b").css({opacity:1,lineHeight:"40px"}).html("用户名不能为空！"):(b(a(this).val()),a(".step_username b").html("用户名只允许包含字母和数字，长度为5-25位，请勿使用手机号！"))})}),a(function(){function b(b){var c=/^1[1-9]{10}$/;if(a(".phone").val().length<11&&a(".phone").val().length>0)a(".step_one_phone em").css({opacity:0}),a(".step_one_phone b").css({opacity:1}).html("手机号不能小于11位!");else if(a(".phone").val().length>11)a(".step_one_phone em").css({opacity:0}),a(".step_one_phone b").css({opacity:1}).html("手机号不能大于11位!");else if(c.test(b))return a(".step_one_phone em").css({opacity:0}),a(".step_one_phone b").css({opacity:0}),!0;return!1}function c(){a(".phone").on("input",function(){if(isNaN(a(".phone").val())){a(".step_one_phone b").css({opacity:1}).html("只能输入数字！"),a(".step_one_phone em").hide();var c=a(this).val();a(this).val(c.replace(/\D|^0/g,""))}else b(a(".phone").val()),a(".step_one_phone b").css({opacity:0})})}c(),a(".phone").on("blur",function(){a(this).val()||(a(".step_one_phone em").css({opacity:0}),a(".step_one_phone  b").css({opacity:1}))}).on("change",function(){a(".step_one_phone b").css({opacity:1}).html("手机号不能为空！");var c=b(a(this).val());c&&a.ajax({url:"/static/jsons/mobile.json?vcode_num=",type:"GET",dataType:"json",beforeSend:function(){a(".step_one_phone strong").show()},success:function(b){a(".step_one_phone strong").hide(),a(".step_one_phone em").css({opacity:0}),a(".step_one_phonee b").css({opacity:0}),"success"===b.status&&b.data.exist?(a(".step_one_phone em").css({opacity:0}),a(".step_one_phone b").css({opacity:1}).html("手机号已存在！"),a(".step_one_phone strong").hide()):b.data.exist||(a(".step_one_phone em").css({opacity:1}),a(".step_one_phone b").hide(),a(".step_one_phone strong").hide())},error:function(){500==status&&alert("服务器错误！")}})})}),a(function(){function b(b){var c=/^\d{6}$/;if(a(".vcode").val().length<6||a(".vcode").val().length>6)a(".step_two_verCode em").hide(),a(".step_two_verCode b").css({opacity:1}).html("验证码格式错误！");else if(c.test(b))return a(".step_two_verCode em").css({display:"block",opacity:1}),a(".step_two_verCode b").hide(),a(".step_two_verCode strong").hide(),!0;return!1}a(".vcode").on("blur",function(){a(this).val()||(a(".step_two_verCode em").css({opacity:0}),a(".step_two_verCode b").css({opacity:1}))}).on("change",function(){var c=b(a(this).val());c&&a.ajax({url:"/static/jsons/vcode.json?vcode_num=",type:"GET",dataType:"json",beforeSend:function(){a(".step_two_verCode strong").show()},success:function(b){a(".step_two_verCode strong").hide(),a(".step_two_verCode b").css({opacity:0}),"success"===b.status&&b.data.exist&&(a(".step_two_verCode em").css({opacity:1}),a(".step_two_verCode b").hide(),a(".step_two_verCode strong").hide())},error:function(a){500==a&&alert("服务器错误！")}})}),a(".vcode").keyup(function(){a(".step_two_verCode b").show(),a(".step_two_verCode em").hide();var b=a(this).val();a(this).val(b.replace(/\D|^0/g,""))})}),a(function(){function b(){if(a(".password").val().length>16&&(a(".step_three_password b").html("密码不能大于16位").css({opacity:1}),a(".step_three_password em").hide()),""==a(".password").val()?(a(".step_three_password b").css({opacity:1,display:"block"}),a(".step_three_password em").hide()):a(".password").val().length<6&&(a(".step_three_password b").html("密码不能小于6位").css({opacity:1}),a(".step_three_password em").hide()),a(".password").val().length>=6&&a(".password").val().length<=16){var b=/^(([a-zA-Z]{3,})+([0-9]{3,}))|(([0-9]{3,})+([a-zA-Z]{3,})|(?=[\x21-\x7e]+))+$/;b.test(a(".password").val())?(a(".step_three_password em").css({opacity:1,display:"block"}),a(".step_three_password b").css({opacity:0})):(a(".step_three_password em").css({opacity:0}),a(".step_three_password b").css({opacity:1}).html("验证码必须是数字和字母组合！"))}}a(".password").on("blur",function(){b()}).on("change",function(){b()})}),a(function(){function b(b){var c=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;return c.test(b)?(a(".step_four_email em").css({opacity:1,display:"block"}),a(".step_four_email b").hide(),!0):(""==a(".email").val()?(a(".step_four_email em").css({opacity:0}),a(".step_four_email b").css({opacity:1})):(a(".step_four_email em").css({opacity:0}),a(".step_four_email b").css({opacity:1,display:"block"}).html("请检查您的邮箱格式!")),!1)}a(".email").on("blur",function(){a(this).val()||(a(".step_four_email em").css({opacity:0}),a(".step_four_email b").css({opacity:1}))}).on("change",function(){var c=b(a(this).val());c&&a.ajax({url:"/static/jsons/mobile.json?vcode_num=",type:"GET",dataType:"json",beforeSend:function(){a(".step_four_email strong").show()},success:function(b){a(".step_four_email strong").hide(),a(".step_four_email em").hide(),a(".step_four_email b").css({opacity:0}),"success"===b.status&&b.data.exist?(a(".step_four_email em").css({opacity:0}),a(".step_four_email b").html("邮箱已经存在!").css({opacity:1,display:"block"}),a(".step_four_email strong").hide()):b.data.exist||(a(".step_four_email em").show(),a(".step_four_email b").hide())},error:function(a){500==a&&alert("服务器错误！")}})})}),a(function(){function b(b){var c=/^[^a-zA-Z]\d{14,17}\w+$/;c.test(b)&&a(".vcard em").show()}a(".idcard").on("blur",function(){a(".idcard").val().length<15?(a(".vcard b").html("身份证号不能小于15位！").show(),a(".vcard em").css({opacity:0})):a(".idcard").val().length>18?(a(".vcard b").show().html("身份证号不能大于18位！"),a(".vcard em").css("opacity",0)):15==a(".idcard").val().length?(a(".vcard em").css({opacity:1}),a(".vcard b").hide()):(a(".vcard em").css({opacity:1}),a(".vcard b").hide()),b(a(".idcard").val())})}),a(function(){a(".user").on("change",function(){a(this).val()||(a(".step_five_user em").css({opacity:0}),a(".step_five_user b").css({opacity:1}))}).on("change",function(){a.ajax({url:"/static/jsons/mobile.json",type:"GET",datatype:"json",timeout:500,beforeSend:function(){a(".step_five_user strong").show()},success:function(b){a(".step_five_user strong").hide(),b.status&&b.data.exist?(a(".step_five_user em").css({opacity:1,display:"block"}),a(".step_five_user b").show(),a(".step_five_user strong").hide()):(a(".step_five_user em").css({opacity:0}),a(".step_five_user b").html("此用户不存在！").css({opacity:1,display:"block"}),a(".step_five_user strong").hide()),""==a(".user").val()&&(a(".step_five_user em").css({opacity:0}),a(".step_five_user b").css({opacity:0}),a(".step_five_user strong").hide())},error:function(a){500==a&&alert("服务器错误！")},timeout:500})})}),a(".registered div").eq(0).show(),a(".reg_one").on("click",function(){a(".registered div").eq(0).show(),a(".registered div").eq(1).hide()});var b=0;a(".next_reg").on("click",function(){return a(".check_input").prop("checked")?(b++,b==a(".registered div").length-1&&(b=0),a(".registered div").eq(0).hide(),a(".registered div").eq(1).show(),void 0):(a(".next_re").css("pointer-events","none"),alert("必须同意服务协议才可以继续！"),!1)}),a(function(){var b=a(window).height();a(".reg_show").on("click",function(){a(".reg_mask").css("display","block").css("height",b),a(".areen").show()}),a(".reg_mask").on("click",function(){a(this).hide(),a(".areen").hide()})})}),a(function(){var b=a(window).height();a(".pcenter_mask").css("height",b),a(function(){a(".modify_pcenter_a").on("click",function(){a(".pcenter_mask").show(),a(".change_mobile").show()}),a(".binding_pcenter").on("click",function(){a(".pcenter_mask").show(),a(".change_email").show()}),a(".modify_pcenter_b").on("click",function(){a(".pcenter_mask").show(),a(".change_content").show()}),a(".modify_pcenter_c").on("click",function(){a(".pcenter_mask").show(),a(".change_password").show()}),a(".pcenter_mask, .pcenter_close").on("click",function(){a(".pcenter_mask").hide(),a(".change_mobile").hide(),a(".change_email").hide(),a(".change_content").hide(),a(".change_password").hide()})})}),a(function(){})});