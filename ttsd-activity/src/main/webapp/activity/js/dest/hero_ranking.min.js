require(["jquery","underscore","layerWrapper","template","jquery.ajax.extension"],function(a,b,c,d){a(function(){function d(d){a.ajax({url:"/activity/hero-ranking/invest/"+d,type:"GET",dataType:"json"}).done(function(c){if(c.status){var d=a(".nodata-invest"),e=a("#investRanking-tbody").parents("table");if(b.isNull(c.records)||0==c.records.length)return d.show(),void e.hide();e.show(),d.hide(),c.type="invest",a("#investRanking-tbody").html(m(c))}}).fail(function(){c.msg("请求失败，请重试！")})}function e(d){a.ajax({url:"/activity/hero-ranking/referrer-invest/"+d,type:"GET",dataType:"json"}).done(function(c){if(c.status){var d=a(".nodata-refer"),e=a("#referRanking-tbody").parents("table");if(b.isNull(c.records)||0==c.records.length)return d.show(),void e.hide();e.show(),d.hide(),c.type="referrer",a("#referRanking-tbody").html(m(c))}}).fail(function(){c.msg("请求失败，请重试！")})}var f=a("#getVip"),g=a(".get-rank"),h=a("#TodayAwards"),i=a("#investRanking-button"),j=a("#referRanking-button"),k=a.trim(h.text()),l=a("#tplTable").html(),m=b.template(l);i.find(".button-small").on("click",function(b){var c,e=a("#HistoryAwards"),f=e.find("em").show().text().split("-"),g=f[0],h=f[1],i=f[2];/heroPre/.test(b.target.id)?i=i-0-1:/heroNext/.test(b.target.id)&&(i=i-0+1),i>0&&i<=31&&(c=g+"-"+h+"-"+i,e.find("em").text(c),c==k?(e.find("i").show(),e.find("em").hide()):(e.find("i").hide(),e.find("em").show()),d(c))}),j.find(".button-small").on("click",function(b){var c,d=a("#ReferRankingDate"),f=d.find("em").text().split("-"),g=f[0],h=f[1],i=f[2];/referPre/.test(b.target.id)?i=i-0-1:/referNext/.test(b.target.id)&&(i=i-0+1),i>0&&i<=31&&(c=g+"-"+h+"-"+i,d.find("em").text(c),c==k?(d.find("i").show(),d.find("em").hide()):(d.find("i").hide(),d.find("em").show()),e(c))}),f.on("click",function(d){d.preventDefault(),a.ajax({url:"/membership/receive",type:"GET",dataType:"json"}).done(function(d){var e=a("#vipTipModelTpl").html(),f=b.template(e);a("#vipTipModel").html(f(d)),c.open({type:1,move:!1,area:["320px","auto"],title:"领取须知",content:a("#vipTipModel")})}).fail(function(){c.msg("请求失败，请重试！")})}),a("body").on("click","#closeTip",function(a){a.preventDefault(),c.closeAll()}),d(k),e(k),g.on("click",function(){cnzzPush.trackClick("153周年庆","我要上榜","英雄榜")}),f.on("click",function(){cnzzPush.trackClick("152周年庆","领取会员","英雄榜")})})});