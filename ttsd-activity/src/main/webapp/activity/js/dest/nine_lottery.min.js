define(["jquery","commonFun","layerWrapper"],function(a,b){function c(){if(g.times+=1,g.roll(),g.times>g.cycle+10&&g.prize==g.index)clearTimeout(g.timer),g.prize=-1,g.times=0,g.click=!1;else{if(g.times<g.cycle)g.speed-=10;else if(g.times==g.cycle){var a=Math.random()*g.count|0;g.prize=a}else g.times>g.cycle+10&&(0==g.prize&&7==g.index||g.prize==g.index+1)?g.speed+=110:g.speed+=20;g.speed<40&&(g.speed=40),g.timer=setTimeout(c,g.speed)}return!1}function d(a){var b=a.find("ul:first"),c=b.find("li:first").height();b.find("li").length>10&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})}var e,f=a("#lotteryList"),g={click:!1,index:-1,count:0,timer:0,speed:20,times:0,cycle:50,prize:-1,init:function(b){a("#"+b).find(".lottery-unit").length>0&&($lottery=a("#"+b),$units=$lottery.find(".lottery-unit"),this.obj=$lottery,this.count=$units.length,$lottery.find(".lottery-unit-"+this.index).addClass("active"))},roll:function(){var b=this.index,c=this.count,d=this.obj;return a(d).find(".lottery-unit-"+b).removeClass("active"),b+=1,b>c-1&&(b=0),a(d).find(".lottery-unit-"+b).addClass("active"),this.index=b,!1},stop:function(a){return this.prize=a,!1}};g.init("lottery"),a("#lottery .lottery-btn").on("click",function(a){return a.preventDefault(),!g.click&&(g.speed=100,c(),g.click=!0,!1)}),a("h3 span",f).on("click",function(b){b.preventDefault();var c=a(this),d=c.index();c.closest(".lottery-right-group").find(".record-group");c.addClass("active").siblings().removeClass("active").closest(".lottery-right-group").find(".record-group .record-item:eq("+d+")").addClass("active").siblings().removeClass("active")}),a(".record-group",f).hover(function(){clearInterval(e)},function(){e=setInterval(function(){d(a(".record-group"),f)},2e3)}).trigger("mouseout")});