apply plugin: 'war'
apply from: 'db_migration.gradle'

dependencies {
    compile fileTree(dir: 'libs', include: '**/*.jar'),
            project(':ttsd-service'),
            project(':ttsd-message'),
            project(':ttsd-point-service'),
            project(':ttsd-jpush'),
            project(':ttsd-activity-repository'),
            project(':ttsd-membership')

    providedCompile "javax.servlet:javax.servlet-api:3.1.0"
}

war {
    archiveName "ROOT.war"
    destinationDir = file("war")
    def outerConfigPath = '/workspace/new_version_config/ttsd-pay-wrapper/'

    if (project.hasProperty("payConfigPath") && new File(payConfigPath).isDirectory()) {
        outerConfigPath = payConfigPath
    }
    from("${outerConfigPath}/SignVerProp.properties") {
        into 'WEB-INF/classes/'
    }
}