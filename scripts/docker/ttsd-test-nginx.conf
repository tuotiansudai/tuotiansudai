server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/log/host.access.log  main;

    rewrite /upload/(\d+)/(.*) /oss-server/$2 last;

    root   /usr/share/nginx/html;

    location ~ \.(ttf|ttc|otf|eot|woff|woff2|font.css|css|mustache)$ {
        add_header Access-Control-Allow-Origin *;
    }

    location /oss-server/ {
       proxy_set_header Host tuotiansudai-qa.oss-cn-beijing.aliyuncs.com;
       proxy_pass http://tuotiansudai-qa.oss-cn-beijing-internal.aliyuncs.com/;
       proxy_next_upstream error timeout invalid_header  http_503;
    }
    error_log  /var/log/nginx/static.error.log  error;
    access_log /var/log/nginx/static.access.log main;
}