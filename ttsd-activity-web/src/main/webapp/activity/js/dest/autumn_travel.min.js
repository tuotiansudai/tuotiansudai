require(["jquery","underscore","layerWrapper","drawCircle","template","commonFun","register_common"],function(a,b,c,d,e){var f=a("#autumnTravelPage"),g=(a(".award-list",f),a(".gift-circle-frame",f)),h=a(".swiper-wrapper",f),i=(a(".swiper-slide",h),commonFun.browserRedirect());if("mobile"==i){var j=commonFun.parseURL(location.href);"yes"==j.params.tag&&f.find(".reg-tag-current").show()}var k=a("div.login-name"),l=k?k.data("login-name"):"";a("a.autumn-travel-invest-channel").click(function(){a.ajax({url:"/activity/autumn/travel/invest?loginName="+l,type:"POST"})});var m=a(".pointer-img",g),n=a("#MobileNumber"),o="/activity/autumn/travel-all-list",p="/activity/autumn/travel-user-list",q="/activity/autumn/travel-draw",r=n.length?n.data("mobile"):"",s=a(".user-record",g),t=a(".own-record",g),u=a(".tip-list",f),v={mobile:r},w={info:"",button:"",area:[]},d=new d(o,p,q,v,u,g);d.GiftRecord(),d.MyGift(),m.on("click",function(a){d.beginLotteryDraw(function(a){if(0==a.returnCode){var b=0;switch(a.prize){case"PORCELAIN_CUP":b=337;break;case"INTEREST_COUPON_2":b=56;break;case"LUXURY":b=116;break;case"RED_ENVELOPE_100":b=160;break;case"INTEREST_COUPON_5":b=230;break;case"RED_ENVELOPE_50":b=300}"CONCRETE"==a.prizeType?(w.button='<a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',w.info='<p class="success-text">恭喜您！</p><p class="reward-text">'+a.message+'！</p><p class="des-text">拓天客服将会在7个工作日内联系您发放奖品</p>'):"VIRTUAL"==a.prizeType&&(w.button='<a href="/my-treasure" class="go-on">去查看</a><a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',w.info='<p class="success-text">恭喜您！</p><p class="reward-text">'+a.message+'！</p><p class="des-text">奖品已发放至“我的宝藏”当中。</p>'),d.rotateFn(b,w)}else 2==a.returnCode?(w.info='<p class="login-text">您还未登录~</p><p class="des-text">请登录后再来抽奖吧！</p>',w.button='<a href="javascript:void(0)" class="go-close">知道了</a>',d.tipWindowPop(w)):3==a.returnCode&&(w.info='<p class="login-text">不在活动时间内~</p>',d.tipWindowPop(w))})}),d.PrizeSwitch(),d.scrollList(s),d.scrollList(t),a("body").on("click",".go-close",function(b){b.preventDefault();var d=a(this);d.hasClass("go-on")&&window.location.reload(),c.closeAll()})});