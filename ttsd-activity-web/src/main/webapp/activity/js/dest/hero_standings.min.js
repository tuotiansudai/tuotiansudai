require(["jquery","underscore","layerWrapper","template","logintip","jquery.ajax.extension","register_common"],function(a,b,c,d){a(function(){function d(a,b){var c=new Date(a);c.setDate(c.getDate()+b);var d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate();return d+"-"+(e<10?"0"+e:e)+"-"+(f<10?"0"+f:f)}function e(b){a.ajax({url:"/activity/hero-ranking/invest/"+b+"?activityCategory=NEW_HERO_RANKING",type:"GET",dataType:"json"}).done(function(b){b.status&&(b.type="invest",a("#investRanking-tbody").html(n(b)),a("#bgItem").html(p(b)))}).fail(function(){c.msg("请求失败，请重试！")})}var f=globalFun.browserRedirect(),g=a("#TodayAwards"),h=a("#historyTime"),i=a("#investRanking-button"),j=a("#heroNext"),k=a("#heroPre"),l=a.trim(g.val()),m=a("#tplTable").html(),n=b.template(m),o=a("#bgtplTable").html(),p=b.template(o);if("mobile"==f){"yes"==globalFun.parseURL(location.href).params.tag&&a(".reg-tag-current").show()}h.text()>=g.val()?j.hide():j.show(),h.text().replace(/-/gi,"")==a("#startTime").val()?k.hide():k.show(),i.find(".change-btn").on("click",function(b){var c,f=h.text();/heroPre/.test(b.target.id)?h.text().replace(/-/gi,"")>a("#startTime").val()&&(c=d(f,-1),e(c),h.text(c)):/heroNext/.test(b.target.id)&&h.text().replace(/-/gi,"")<=a("#endTime").val()&&(c=d(f,1),e(c),h.text(c)),h.text().replace(/-/gi,"")>=g.val().replace(/-/gi,"")?j.hide():j.show(),h.text().replace(/-/gi,"")==a("#startTime").val()?k.hide():k.show()}),e(l)})});