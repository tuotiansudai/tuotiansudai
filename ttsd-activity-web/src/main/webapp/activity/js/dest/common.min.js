define(["jquery"],function(a){var b={compile:function(a,b){for(var b=b+"",c=a.split(""),d=(b.length,0);d<11;d++)c[2*d+2]=b[d]?b[d]:"a";return c.join("")},uncompile:function(a){for(var a=a+"",b=a.split(""),c=[],d=0;d<11;d++)c[d]=b[2*d+2];var e=c.join(""),f=e.match(/\d/gi);return f.join("")},initRadio:function(b,c){var d=b.length;d&&b.each(function(b,d){var e=a(this);e.is(":checked")&&e.next("label").addClass("checked"),e.next("label").click(function(){var b=a(this);/checked/.test(this.className)||(c.removeClass("checked"),b.addClass("checked"))})})},IdentityCodeValid:function(a){var b={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},c=!0;if(a&&/\d{17}[\d|x]/i.test(a))if(b[a.substr(0,2)]){if(18==a.length){a=a.split("");for(var d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],e=[1,0,"X",9,8,7,6,5,4,3,2],f=0,g=0,h=0,i=0;i<17;i++)g=a[i],h=d[i],f+=g*h;e[f%11]!=a[17]&&(c=!1)}}else c=!1;else c=!1;return c},checkedAge:function(a){var b=a.substring(6,14),c=new Date,d=!0,e=c.getFullYear(),f=c.getMonth()+1,g=c.getDate(),h=e+""+(f<10?"0"+f:f)+(g<10?"0"+g:g),i=Math.floor((h-b)/1e4);return i<18&&(d=!1),d},popWindow:function(b,c){var d=a('<div class="shade-body-mask"></div>'),e=a(b),f=a.extend({width:"460px",height:"370px"},c);e.css({width:f.width,height:f.height});var g=function(){var b=(document.body.scrollTop||document.documentElement.scrollTop,a(window).height()-e.height()),c=a(window).width()-e.width();e.css({top:b/2,left:c/2}),d.height(a("body").height()),a("body").append(e).append(d)};g(),a(".close-btn,.go-close",e).on("click",function(){e.remove(),d.remove()})},isUserLogin:function(){var b=a.Deferred();return a.ajax({url:"/isLogin",type:"GET"}).done(function(c){if(c){b.reject(c),a("meta[name='_csrf']").remove(),a("head").append(a(c.responseText));var d=a("meta[name='_csrf']").attr("content"),e=a("meta[name='_csrf_header']").attr("content");a(document).ajaxSend(function(a,b,c){b.setRequestHeader(e,d)})}else b.resolve()}).fail(function(){b.reject()}),b.promise()},useAjax:function(b,c,d){var e={type:"POST",dataType:"json"},f=a.extend(e,b);if("POST"==f.type){var g=a("meta[name='_csrf']").attr("content"),h=a("meta[name='_csrf_header']").attr("content");a(document).ajaxSend(function(a,b,c){b.setRequestHeader(h,g)})}a.ajax(f).done(function(a){c&&c(a)}).fail(function(a){console.error("接口错误，请联系客服")}).always(function(){d&&d()})},countDownLoan:function(b,c){var d,e={btnDom:"",time:60,textCounting:"秒后重新发送"},f=a.extend({},e,b),g=f.btnDom,h=function(){g.text(f.time--+f.textCounting).prop("disabled",!0).addClass("count-downing"),0==f.time&&(clearInterval(d),c&&c(),g.text("重新发送").prop("disabled",!1).removeClass("count-downing"))};f.time>0&&(h(),g.val(f.textCounting),d=setInterval(function(){h()},1e3))}};return b});