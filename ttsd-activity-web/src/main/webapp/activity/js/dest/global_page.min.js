function globalFun(){this.$=function(a){return"string"!=typeof a?a:a.indexOf("#")>=0?(a=a.replace("#",""),document.getElementById(a)?document.getElementById(a):null):void 0},this.browserRedirect=function(){var a=navigator.userAgent.toLowerCase(),b="ipad"==a.match(/ipad/i),c="iphone os"==a.match(/iphone os/i),d="midp"==a.match(/midp/i),e="rv:1.2.3.4"==a.match(/rv:1.2.3.4/i),f="ucweb"==a.match(/ucweb/i),g="android"==a.match(/android/i),h="windows ce"==a.match(/windows ce/i),i="windows mobile"==a.match(/windows mobile/i);return b||c||d||e||f||g||h||i?"mobile":"pc"},this.equipment=function(){var a=navigator.userAgent.toLowerCase(),b={},c="micromessenger"==a.match(/MicroMessenger/i);return c?(b.wechat=!0,a.match("android")?b.kind="android":(a.match("iphone")||a.match("ipad"))&&(b.kind="weIos")):(b.wechat=!1,a.match("android")?b.kind="android":(a.match("iphone")||a.match("ipad"))&&(b.kind="ios")),b},this.categoryCodeUrl={android:"https://tuotiansudai.com/app/tuotiansudai.apk",ios:"http://itunes.apple.com/us/app/id1039233966",weIos:"http://a.app.qq.com/o/simple.jsp?pkgname=com.tuotiansudai.tuotianclient"},this.parseURL=function(a){var b=document.createElement("a");return b.href=a,{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:function(){for(var a,c={},d=b.search.replace(/^\?/,"").split("&"),e=d.length,f=0;f<e;f++)d[f]&&(a=d[f].split("="),c[a[0]]=a[1]);return c}(),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}},this.addEventHandler=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c):a.attachEvent("on"+b,c))},this.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},this.addClass=function(a,b){this.hasClass(a,b)||(a.className+=" "+b)},this.removeClass=function(a,b){if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},this.toggleClass=function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)}}function cnzzPushConstructor(){this.trackClick=function(a,b,c){window.testlaney;_czc.push(["_trackEvent",a,b,c])}}globalFun.prototype={init:function(){this.addEventHandler(this.$("#closeDownloadBox"),"click",this.closeDownLoadBox.bind(this)),this.addEventHandler(this.$("#btnExperience"),"click",this.toExperience.bind(this)),this.addEventHandler(this.$("#getMore"),"click",this.moreFriendLinks.bind(this)),this.addEventHandler(this.$("#showMainMenu"),"click",this.showMainMenu.bind(this)),this.addEventHandler(this.$("#iphone-app-pop"),"mouseover",this.showAppCode.bind(this)),this.addEventHandler(this.$("#iphone-app-pop"),"mouseleave",this.hideAppCode.bind(this))},showMainMenu:function(a){a.preventDefault();var b=(a.target,this.$("#TopMainMenuList"));""==b.style.WebkitTransform?b.style.WebkitTransform="translate(100%)":b.style.WebkitTransform=""},isViewPort:function(){for(var a=document.getElementsByTagName("meta"),b=a.length,c=0;c<b;c++)if("viewport"==a[c].getAttribute("name"))return!0;return!1},isShowMainMenu:function(){var a=this.isViewPort(),b=this.browserRedirect();a&&"mobile"==b&&(this.$("#closeDownloadBox").style.display="none")},closeDownLoadBox:function(a){a.stopPropagation(),a.preventDefault(),a.currentTarget.parentElement.style.display="none"},toExperience:function(a){a.stopPropagation(),a.preventDefault();var b=this.equipment();return b.wechat&&"android"==b.kind?void(location.href="/app/download"):void(location.href=this.categoryCodeUrl[b.kind])},showAppCode:function(){this.removeClass(this.$("#iphone-app-img"),"hide")},hideAppCode:function(){this.addClass(this.$("#iphone-app-img"),"hide")},moreFriendLinks:function(a){var b=a.currentTarget,c=b.previousElementSibling,d="30px";this.toggleClass(b,"active"),d=this.hasClass(b,"active")?"auto":"30px",c.style.height=d},loadCss:function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)}};var globalFun=new globalFun;globalFun.init(),cnzzPush=new cnzzPushConstructor;